{"version":3,"file":"DigitalShoebox-0YOSzyz4.js","names":["combinedDocuments: UploadedDocument[]"],"sources":["../../src/services/shared.ts","../../src/services/receiptsService.ts","../../src/pages/DigitalShoebox.tsx"],"sourcesContent":["export async function authFetch(input: RequestInfo | URL, init?: RequestInit) {\r\n  const token = localStorage.getItem('authToken');\r\n  const headers = new Headers(init?.headers || {});\r\n  if (token) headers.set('Authorization', `Bearer ${token}`);\r\n  return fetch(input, { ...init, headers });\r\n}\r\n","import { authFetch } from './shared';\r\n\r\nexport interface Receipt {\r\n  _id: string;\r\n  originalFilename: string;\r\n  status: string;\r\n  vendorName?: string;\r\n  grossAmount?: number;\r\n  taxAmount?: number;\r\n  netAmount?: number;\r\n  category?: string;\r\n  currency?: string;\r\n  documentDate?: string;\r\n  relatedLedgerEntryId?: string;\r\n  createdAt: string;\r\n  extractedText?: string;\r\n  extractionFields?: { key: string; value: any; confidence?: number; source?: string }[];\r\n}\r\n\r\nconst base = '/api/receipts';\r\n\r\nexport const receiptsService = {\r\n  async list(): Promise<Receipt[]> {\r\n    const res = await authFetch(base);\r\n    if (!res.ok) throw new Error('Failed to fetch receipts');\r\n    const data = await res.json();\r\n    return data.data || [];\r\n  },\r\n  async upload(file: File, meta?: { currency?: string; documentDate?: string }) {\r\n    const form = new FormData();\r\n    form.append('file', file);\r\n    if (meta?.currency) form.append('currency', meta.currency);\r\n    if (meta?.documentDate) form.append('documentDate', meta.documentDate);\r\n    const res = await authFetch(base + '/upload', { method: 'POST', body: form });\r\n    const data = await res.json();\r\n    if (!res.ok) throw new Error(data.message || 'Upload failed');\r\n    return data.data as Receipt;\r\n  },\r\n  async ocr(id: string) {\r\n    const res = await authFetch(`${base}/${id}/ocr`, { method: 'POST' });\r\n    const data = await res.json();\r\n    if (!res.ok) throw new Error(data.message || 'OCR failed');\r\n    return data.data as Receipt;\r\n  },\r\n  async classify(id: string) {\r\n    const res = await authFetch(`${base}/${id}/classify`, { method: 'POST' });\r\n    const data = await res.json();\r\n    if (!res.ok) throw new Error(data.message || 'Classification failed');\r\n    return data.data as Receipt;\r\n  },\r\n  async approve(id: string, overrides?: Partial<Pick<Receipt,'vendorName'|'grossAmount'|'taxAmount'|'netAmount'|'category'>>) {\r\n    const res = await authFetch(`${base}/${id}/approve`, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(overrides || {}) });\r\n    const data = await res.json();\r\n    if (!res.ok) throw new Error(data.message || 'Approval failed');\r\n    return data.data.receipt as Receipt;\r\n  }\r\n};\r\n\r\nexport default receiptsService;\r\n","import { useState, useEffect } from 'react'\r\nimport { receiptsService } from '../services/receiptsService'\r\nimport type { Receipt } from '../services/receiptsService'\r\n\r\ninterface UploadedDocument {\r\n  id: string\r\n  filename: string\r\n  fileType: 'receipt' | 'bill' | 'invoice' | 'expense'\r\n  uploadDate: string\r\n  status: 'processing' | 'ready' | 'failed'\r\n  extractedData?: {\r\n    merchantName?: string\r\n    amount?: number\r\n    date?: string\r\n    items?: Array<{\r\n      description: string\r\n      quantity: number\r\n      price: number\r\n    }>\r\n    taxAmount?: number\r\n    taxRate?: number\r\n    category?: string\r\n  }\r\n  thumbnailUrl?: string\r\n  originalUrl?: string\r\n}\r\n\r\nexport default function DigitalShoebox() {\r\n  const [activeTab, setActiveTab] = useState<'ready' | 'processing' | 'failed' | 'settings'>('ready')\r\n  // Legacy mock documents removed; using API receipts exclusively\r\n  const [dragOver, setDragOver] = useState(false)\r\n  const [uploading, setUploading] = useState(false)\r\n  const [selectedDocument, setSelectedDocument] = useState<UploadedDocument | null>(null)\r\n  const [apiReceipts, setApiReceipts] = useState<Receipt[]>([])\r\n  const [loadingReceipts, setLoadingReceipts] = useState(false)\r\n  const [error, setError] = useState<string | null>(null)\r\n\r\n  // New state for actual receipt under review\r\n  const [reviewReceipt, setReviewReceipt] = useState<Receipt | null>(null)\r\n\r\n  // Settings state\r\n  const [settings, setSettings] = useState({\r\n    whatsappNumber: '+60179759600',\r\n    emailAddress: 'hafjetmalaysia@gmail.com',\r\n    autoProcess: true,\r\n    splitPDF: true,\r\n    notificationEmail: '',\r\n    defaultCategory: 'general'\r\n  })\r\n\r\n  useEffect(() => {\r\n    const load = async () => {\r\n      setLoadingReceipts(true)\r\n      try {\r\n        const list = await receiptsService.list()\r\n        setApiReceipts(list)\r\n      } catch (e) {\r\n        const msg = e instanceof Error ? e.message : 'Failed to load receipts'\r\n        setError(msg)\r\n      } finally {\r\n        setLoadingReceipts(false)\r\n      }\r\n    }\r\n    load()\r\n  }, [])\r\n\r\n  const refresh = async () => {\r\n    try {\r\n      const list = await receiptsService.list()\r\n      setApiReceipts(list)\r\n  } catch { /* ignore */ }\r\n  }\r\n\r\n  const mapStatus = (r: Receipt): UploadedDocument['status'] => {\r\n    switch (r.status) {\r\n      case 'uploaded': return 'processing'\r\n      case 'ocr_processed': return 'processing'\r\n      case 'classified': return 'processing'\r\n      case 'review_pending': return 'ready'\r\n      case 'approved': return 'ready'\r\n      case 'posted': return 'ready'\r\n      case 'error': return 'failed'\r\n      default: return 'processing'\r\n    }\r\n  }\r\n\r\n  // Merge API receipts into documents display (preserve mock only if no API data yet)\r\n  const combinedDocuments: UploadedDocument[] = apiReceipts.map(r => ({\r\n    id: r._id,\r\n    filename: r.originalFilename,\r\n    fileType: 'receipt',\r\n    uploadDate: new Date(r.createdAt).toLocaleString(),\r\n    status: mapStatus(r),\r\n    extractedData: r.grossAmount ? {\r\n      merchantName: r.vendorName,\r\n      amount: r.grossAmount,\r\n      date: r.documentDate ? new Date(r.documentDate).toISOString().split('T')[0] : undefined,\r\n      taxAmount: r.taxAmount,\r\n      taxRate: r.taxAmount && r.grossAmount ? +( (r.taxAmount / r.grossAmount) * 100 ).toFixed(2) : undefined,\r\n      category: r.category\r\n    } : undefined\r\n  }))\r\n\r\n  const handleApiUpload = async (files: FileList) => {\r\n    setUploading(true)\r\n    try {\r\n      for (let i = 0; i < files.length; i++) {\r\n        await receiptsService.upload(files[i])\r\n      }\r\n      await refresh()\r\n    } catch (err) {\r\n      const msg = err instanceof Error ? err.message : 'Upload failed'\r\n      alert(msg)\r\n    } finally {\r\n      setUploading(false)\r\n    }\r\n  }\r\n\r\n  // Replace handleFileUpload to prefer API\r\n  const handleFileUpload = handleApiUpload\r\n\r\n  const beginReview = (doc: UploadedDocument) => {\r\n    const r = apiReceipts.find(r => r._id === doc.id)\r\n    if (r) setReviewReceipt(r)\r\n    else setSelectedDocument(doc) // fallback to mock\r\n  }\r\n\r\n  const triggerOCR = async (id: string) => {\r\n    try { await receiptsService.ocr(id); await refresh() } catch (e) { alert(e instanceof Error ? e.message : 'OCR failed') }\r\n  }\r\n  const triggerClassify = async (id: string) => {\r\n    try { await receiptsService.classify(id); await refresh() } catch (e) { alert(e instanceof Error ? e.message : 'Classification failed') }\r\n  }\r\n  const approveReceipt = async (id: string, overrides?: Partial<Receipt>) => {\r\n    try { await receiptsService.approve(id, overrides); await refresh(); setReviewReceipt(null) } catch (e) { alert(e instanceof Error ? e.message : 'Approval failed') }\r\n  }\r\n\r\n  const handleDragOver = (e: React.DragEvent) => {\r\n    e.preventDefault()\r\n    setDragOver(true)\r\n  }\r\n\r\n  const handleDragLeave = (e: React.DragEvent) => {\r\n    e.preventDefault()\r\n    setDragOver(false)\r\n  }\r\n\r\n  const handleDrop = (e: React.DragEvent) => {\r\n    e.preventDefault()\r\n    setDragOver(false)\r\n    const files = e.dataTransfer.files\r\n    if (files.length > 0) {\r\n      handleFileUpload(files)\r\n    }\r\n  }\r\n\r\n  const filteredDocuments = activeTab === 'settings' ? [] : combinedDocuments.filter(doc => doc.status === activeTab)\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {loadingReceipts && <div className=\"text-sm text-gray-500\">Loading receipts...</div>}\r\n      {error && <div className=\"text-sm text-red-600\">{error}</div>}\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h1 className=\"text-2xl font-bold text-gray-900\">üìÅ Digital Shoebox</h1>\r\n          <p className=\"text-gray-600\">Upload receipts, bills & invoices for automatic data entry</p>\r\n        </div>\r\n        <div className=\"text-right\">\r\n          <p className=\"text-sm text-gray-500\">üá≤üáæ Malaysian Format Support</p>\r\n          <p className=\"text-sm text-gray-500\">SST, GST & Tax Detection</p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Upload Area */}\r\n      <div \r\n        className={`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${\r\n          dragOver \r\n            ? 'border-blue-500 bg-blue-50' \r\n            : 'border-gray-300 bg-gray-50 hover:bg-gray-100'\r\n        }`}\r\n        onDragOver={handleDragOver}\r\n        onDragLeave={handleDragLeave}\r\n        onDrop={handleDrop}\r\n      >\r\n        <div className=\"space-y-4\">\r\n          <div className=\"text-6xl\">üì§</div>\r\n          <h3 className=\"text-lg font-semibold text-gray-900\">Upload Files Here</h3>\r\n          <p className=\"text-gray-600\">\r\n            Click or drop files here to upload. You may upload multiple files in JPG / PNG / PDF format.\r\n          </p>\r\n          \r\n          <div className=\"flex flex-col sm:flex-row gap-4 justify-center items-center\">\r\n            <label className=\"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer\">\r\n              üìÅ Choose Files\r\n              <input\r\n                type=\"file\"\r\n                multiple\r\n                accept=\".jpg,.jpeg,.png,.pdf\"\r\n                className=\"hidden\"\r\n                onChange={(e) => e.target.files && handleFileUpload(e.target.files)}\r\n              />\r\n            </label>\r\n            \r\n            <div className=\"text-sm text-gray-500\">\r\n              <p>Split PDF Files: {settings.splitPDF ? 'ON' : 'OFF'}</p>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Upload Methods */}\r\n          <div className=\"border-t border-gray-200 pt-6 mt-6\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              {/* WhatsApp Upload */}\r\n              <div className=\"bg-green-50 border border-green-200 rounded-lg p-4\">\r\n                <h4 className=\"font-semibold text-green-800 mb-2\">üì± Send Files via WhatsApp</h4>\r\n                <p className=\"text-green-700 text-sm mb-2\">{settings.whatsappNumber} üì±</p>\r\n                <p className=\"text-xs text-green-600\">\r\n                  You must register your mobile number in Shoebox Settings first before sending in your files.\r\n                </p>\r\n              </div>\r\n\r\n              {/* Email Upload */}\r\n              <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\r\n                <h4 className=\"font-semibold text-blue-800 mb-2\">üìß Send Files via Email</h4>\r\n                <p className=\"text-blue-700 text-sm mb-2\">{settings.emailAddress} üìé</p>\r\n                <p className=\"text-xs text-blue-600\">\r\n                  Employee's dedicated email address for claim submissions can be found in Shoebox Settings.\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Processing Status */}\r\n      {uploading && (\r\n        <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-4\">\r\n          <div className=\"flex items-center\">\r\n            <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-yellow-600 mr-3\"></div>\r\n            <span className=\"text-yellow-800\">Processing uploaded files...</span>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Tabs */}\r\n      <div className=\"border-b border-gray-200\">\r\n        <nav className=\"-mb-px flex space-x-8\">\r\n          {[\r\n            { key: 'ready', label: '‚úÖ Ready', count: combinedDocuments.filter(d => d.status === 'ready').length },\r\n            { key: 'processing', label: '‚è≥ Processing', count: combinedDocuments.filter(d => d.status === 'processing').length },\r\n            { key: 'failed', label: '‚ùå Failed', count: combinedDocuments.filter(d => d.status === 'failed').length },\r\n            { key: 'settings', label: '‚öôÔ∏è Shoebox Settings', count: null }\r\n          ].map((tab) => (\r\n            <button\r\n              key={tab.key}\r\n              onClick={() => setActiveTab(tab.key as 'ready' | 'processing' | 'failed' | 'settings')}\r\n              className={`py-2 px-1 border-b-2 font-medium text-sm ${\r\n                activeTab === tab.key\r\n                  ? 'border-blue-500 text-blue-600'\r\n                  : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\r\n              }`}\r\n            >\r\n              {tab.label} {tab.count !== null && `(${tab.count})`}\r\n            </button>\r\n          ))}\r\n        </nav>\r\n      </div>\r\n\r\n      {/* Document List / Settings */}\r\n      <div className=\"bg-white rounded-lg border border-gray-200\">\r\n        {activeTab === 'settings' ? (\r\n          /* Shoebox Settings */\r\n          <div className=\"p-6\">\r\n            <div className=\"mb-6\">\r\n              <h2 className=\"text-2xl font-bold text-gray-900 mb-2\">‚öôÔ∏è Shoebox Settings</h2>\r\n              <p className=\"text-gray-600\">Configure your Digital Shoebox upload methods and preferences.</p>\r\n            </div>\r\n\r\n            <div className=\"space-y-6\">\r\n              {/* WhatsApp Settings */}\r\n              <div className=\"bg-green-50 border border-green-200 rounded-lg p-6\">\r\n                <h3 className=\"text-lg font-semibold text-green-800 mb-4\">üì± WhatsApp Upload Settings</h3>\r\n                <div className=\"space-y-4\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-green-700 mb-2\">\r\n                      Registered Mobile Number\r\n                    </label>\r\n                    <input\r\n                      type=\"tel\"\r\n                      value={settings.whatsappNumber}\r\n                      onChange={(e) => setSettings(prev => ({ ...prev, whatsappNumber: e.target.value }))}\r\n                      className=\"w-full px-3 py-2 border border-green-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500\"\r\n                      placeholder=\"+60-12-345-6789\"\r\n                    />\r\n                    <p className=\"text-xs text-green-600 mt-1\">\r\n                      Only this registered number can send files via WhatsApp\r\n                    </p>\r\n                  </div>\r\n                  <div className=\"bg-green-100 p-4 rounded-md\">\r\n                    <h4 className=\"font-medium text-green-800 mb-2\">How to use WhatsApp Upload:</h4>\r\n                    <ol className=\"list-decimal list-inside text-sm text-green-700 space-y-1\">\r\n                      <li>Save this number in your contacts: <strong>{settings.whatsappNumber}</strong></li>\r\n                      <li>Send your receipt/invoice images to this number</li>\r\n                      <li>Files will automatically appear in your Digital Shoebox</li>\r\n                      <li>Our AI will extract the data for you</li>\r\n                    </ol>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Email Settings */}\r\n              <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-6\">\r\n                <h3 className=\"text-lg font-semibold text-blue-800 mb-4\">üìß Email Upload Settings</h3>\r\n                <div className=\"space-y-4\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-blue-700 mb-2\">\r\n                      Dedicated Email Address\r\n                    </label>\r\n                    <input\r\n                      type=\"email\"\r\n                      value={settings.emailAddress}\r\n                      onChange={(e) => setSettings(prev => ({ ...prev, emailAddress: e.target.value }))}\r\n                      className=\"w-full px-3 py-2 border border-blue-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                      placeholder=\"your-email@company.com\"\r\n                    />\r\n                    <p className=\"text-xs text-blue-600 mt-1\">\r\n                      Employees can send receipts to this email address\r\n                    </p>\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-blue-700 mb-2\">\r\n                      Notification Email\r\n                    </label>\r\n                    <input\r\n                      type=\"email\"\r\n                      value={settings.notificationEmail}\r\n                      onChange={(e) => setSettings(prev => ({ ...prev, notificationEmail: e.target.value }))}\r\n                      className=\"w-full px-3 py-2 border border-blue-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                      placeholder=\"admin@company.com\"\r\n                    />\r\n                    <p className=\"text-xs text-blue-600 mt-1\">\r\n                      Get notified when new documents are uploaded\r\n                    </p>\r\n                  </div>\r\n                  <div className=\"bg-blue-100 p-4 rounded-md\">\r\n                    <h4 className=\"font-medium text-blue-800 mb-2\">How to use Email Upload:</h4>\r\n                    <ol className=\"list-decimal list-inside text-sm text-blue-700 space-y-1\">\r\n                      <li>Send emails with attachments to: <strong>{settings.emailAddress}</strong></li>\r\n                      <li>Subject line can include expense category</li>\r\n                      <li>Attach receipt images or PDF documents</li>\r\n                      <li>System will process them automatically</li>\r\n                    </ol>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Processing Settings */}\r\n              <div className=\"bg-gray-50 border border-gray-200 rounded-lg p-6\">\r\n                <h3 className=\"text-lg font-semibold text-gray-800 mb-4\">üîß Processing Settings</h3>\r\n                <div className=\"space-y-4\">\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <div>\r\n                      <label className=\"text-sm font-medium text-gray-700\">Auto-process uploads</label>\r\n                      <p className=\"text-xs text-gray-500\">Automatically extract data from uploaded documents</p>\r\n                    </div>\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={settings.autoProcess}\r\n                      onChange={(e) => setSettings(prev => ({ ...prev, autoProcess: e.target.checked }))}\r\n                      className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\r\n                    />\r\n                  </div>\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <div>\r\n                      <label className=\"text-sm font-medium text-gray-700\">Split PDF files</label>\r\n                      <p className=\"text-xs text-gray-500\">Automatically split multi-page PDFs into individual receipts</p>\r\n                    </div>\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={settings.splitPDF}\r\n                      onChange={(e) => setSettings(prev => ({ ...prev, splitPDF: e.target.checked }))}\r\n                      className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                      Default Category\r\n                    </label>\r\n                    <select\r\n                      value={settings.defaultCategory}\r\n                      onChange={(e) => setSettings(prev => ({ ...prev, defaultCategory: e.target.value }))}\r\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                    >\r\n                      <option value=\"general\">General Expenses</option>\r\n                      <option value=\"travel\">Travel & Transport</option>\r\n                      <option value=\"meals\">Meals & Entertainment</option>\r\n                      <option value=\"office\">Office Supplies</option>\r\n                      <option value=\"utilities\">Utilities</option>\r\n                      <option value=\"marketing\">Marketing</option>\r\n                    </select>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Save Button */}\r\n              <div className=\"flex justify-end\">\r\n                <button\r\n                  onClick={() => {\r\n                    // Save settings logic here\r\n                    alert('Settings saved successfully!');\r\n                  }}\r\n                  className=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                >\r\n                  üíæ Save Settings\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          /* Document List */\r\n          <>\r\n            {filteredDocuments.length === 0 ? (\r\n              <div className=\"text-center py-12\">\r\n                <div className=\"text-6xl mb-4\">üì≠</div>\r\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">\r\n                  {activeTab === 'ready' && 'Hurray! Nothing is left.'}\r\n                  {activeTab === 'processing' && 'No files processing'}\r\n                  {activeTab === 'failed' && 'No failed uploads'}\r\n                </h3>\r\n                <p className=\"text-gray-600\">\r\n                  {activeTab === 'ready' && 'All your documents have been processed and recorded.'}\r\n                  {activeTab === 'processing' && 'Upload some files to see them being processed here.'}\r\n                  {activeTab === 'failed' && 'All uploads completed successfully.'}\r\n                </p>\r\n              </div>\r\n            ) : (\r\n          <div className=\"divide-y divide-gray-200\">\r\n            {filteredDocuments.map((doc) => (\r\n              <div key={doc.id} className=\"p-4 hover:bg-gray-50\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div className=\"flex items-center space-x-4\">\r\n                    {/* Thumbnail */}\r\n                    <div className=\"w-16 h-16 bg-gray-200 rounded-lg flex items-center justify-center\">\r\n                      {doc.status === 'processing' ? (\r\n                        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\r\n                      ) : (\r\n                        <span className=\"text-2xl\">\r\n                          {doc.fileType === 'receipt' && 'üßæ'}\r\n                          {doc.fileType === 'bill' && 'üìÑ'}\r\n                          {doc.fileType === 'invoice' && 'üìä'}\r\n                          {doc.fileType === 'expense' && 'üí∏'}\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n\r\n                    {/* Document Info */}\r\n                    <div className=\"flex-1\">\r\n                      <h4 className=\"font-medium text-gray-900\">{doc.filename}</h4>\r\n                      <p className=\"text-sm text-gray-500\">\r\n                        {doc.fileType.charAt(0).toUpperCase() + doc.fileType.slice(1)} ‚Ä¢ {doc.uploadDate}\r\n                      </p>\r\n                      \r\n                      {doc.extractedData && (\r\n                        <div className=\"mt-2 text-sm\">\r\n                          <span className=\"text-green-600 font-medium\">\r\n                            {doc.extractedData.merchantName}\r\n                          </span>\r\n                          <span className=\"text-gray-500 mx-2\">‚Ä¢</span>\r\n                          <span className=\"text-blue-600 font-medium\">\r\n                            RM {doc.extractedData.amount?.toFixed(2)}\r\n                          </span>\r\n                          {doc.extractedData.taxAmount && (\r\n                            <>\r\n                              <span className=\"text-gray-500 mx-2\">‚Ä¢</span>\r\n                              <span className=\"text-orange-600 text-xs\">\r\n                                SST: RM {doc.extractedData.taxAmount.toFixed(2)}\r\n                              </span>\r\n                            </>\r\n                          )}\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Actions */}\r\n                  <div className=\"flex items-center space-x-3\">\r\n                    {doc.status === 'processing' && (\r\n                      <div className=\"flex items-center space-x-2\">\r\n                        <button onClick={() => triggerOCR(doc.id)} className=\"px-3 py-1 text-xs bg-indigo-600 text-white rounded hover:bg-indigo-700\">OCR</button>\r\n                        <button onClick={() => triggerClassify(doc.id)} className=\"px-3 py-1 text-xs bg-purple-600 text-white rounded hover:bg-purple-700\">Classify</button>\r\n                      </div>\r\n                    )}\r\n                    {doc.status === 'ready' && (\r\n                      <button\r\n                        onClick={() => beginReview(doc)}\r\n                        className=\"px-4 py-2 text-blue-600 hover:bg-blue-50 rounded-lg text-sm font-medium\"\r\n                      >\r\n                        üëÅÔ∏è Review\r\n                      </button>\r\n                    )}\r\n                    {doc.status === 'failed' && (\r\n                      <button className=\"px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg text-sm font-medium\">üîÑ Retry</button>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n        </>\r\n        )}\r\n      </div>\r\n\r\n      {/* Review Modal */}\r\n      {(selectedDocument || reviewReceipt) && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n          <div className=\"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto\">\r\n            <div className=\"p-6\">\r\n              <div className=\"flex items-center justify-between mb-6\">\r\n                <h3 className=\"text-lg font-semibold\">Review Document</h3>\r\n                <button\r\n                  onClick={() => {\r\n                    setSelectedDocument(null)\r\n                    setReviewReceipt(null)\r\n                  }}\r\n                  className=\"text-gray-400 hover:text-gray-600\"\r\n                >\r\n                  ‚úï\r\n                </button>\r\n              </div>\r\n\r\n              <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n                {/* Document Preview */}\r\n                <div>\r\n                  <h4 className=\"font-medium mb-3\">Document Preview</h4>\r\n                  <div className=\"bg-gray-100 rounded-lg p-8 text-center\">\r\n                    <span className=\"text-6xl\">üìÑ</span>\r\n                    <p className=\"text-gray-600 mt-2\">{selectedDocument?.filename || reviewReceipt?.originalFilename}</p>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Extracted Data */}\r\n                <div>\r\n                  <h4 className=\"font-medium mb-3\">Extracted Information</h4>\r\n                  {(selectedDocument?.extractedData || reviewReceipt) && (\r\n                    <div className=\"space-y-4\">\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">Merchant Name</label>\r\n                        <input\r\n                          type=\"text\"\r\n                          value={selectedDocument?.extractedData?.merchantName || reviewReceipt?.vendorName || ''}\r\n                          className=\"w-full border border-gray-300 rounded px-3 py-2\"\r\n                          readOnly\r\n                        />\r\n                      </div>\r\n\r\n                      <div className=\"grid grid-cols-2 gap-4\">\r\n                        <div>\r\n                          <label className=\"block text-sm font-medium text-gray-700 mb-1\">Amount (RM)</label>\r\n                          <input\r\n                            type=\"number\"\r\n                            value={selectedDocument?.extractedData?.amount || reviewReceipt?.grossAmount || 0}\r\n                            step=\"0.01\"\r\n                            className=\"w-full border border-gray-300 rounded px-3 py-2\"\r\n                            readOnly\r\n                          />\r\n                        </div>\r\n                        <div>\r\n                          <label className=\"block text-sm font-medium text-gray-700 mb-1\">Date</label>\r\n                          <input\r\n                            type=\"date\"\r\n                            value={selectedDocument?.extractedData?.date || (reviewReceipt?.documentDate ? new Date(reviewReceipt.documentDate).toISOString().split('T')[0] : '')}\r\n                            className=\"w-full border border-gray-300 rounded px-3 py-2\"\r\n                            readOnly\r\n                          />\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div className=\"grid grid-cols-2 gap-4\">\r\n                        <div>\r\n                          <label className=\"block text-sm font-medium text-gray-700 mb-1\">Tax Amount (RM)</label>\r\n                          <input\r\n                            type=\"number\"\r\n                            value={selectedDocument?.extractedData?.taxAmount || reviewReceipt?.taxAmount || 0}\r\n                            step=\"0.01\"\r\n                            className=\"w-full border border-gray-300 rounded px-3 py-2\"\r\n                            readOnly\r\n                          />\r\n                        </div>\r\n                        <div>\r\n                          <label className=\"block text-sm font-medium text-gray-700 mb-1\">Tax Rate (%)</label>\r\n                          <select className=\"w-full border border-gray-300 rounded px-3 py-2\" disabled>\r\n                            <option value=\"6\">6% (SST)</option>\r\n                            <option value=\"0\">0% (Exempt)</option>\r\n                            <option value=\"10\">10% (Service Tax)</option>\r\n                          </select>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">Category</label>\r\n                        <select className=\"w-full border border-gray-300 rounded px-3 py-2\" disabled defaultValue={selectedDocument?.extractedData?.category || reviewReceipt?.category}>\r\n                          <option value=\"Meals & Entertainment\">Meals & Entertainment</option>\r\n                          <option value=\"Office Expenses\">Office Expenses</option>\r\n                          <option value=\"Travel\">Travel</option>\r\n                          <option value=\"Utilities\">Utilities</option>\r\n                          <option value=\"Professional Services\">Professional Services</option>\r\n                        </select>\r\n                      </div>\r\n\r\n                      {/* Items */}\r\n                      {/* (Optional) Line items removed for API receipts placeholder */}\r\n\r\n                      {/* Action Buttons */}\r\n                      <div className=\"flex space-x-3 pt-4\">\r\n                        <button\r\n                          onClick={() => approveReceipt(reviewReceipt!._id, { /* overrides if needed */ })}\r\n                          className=\"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700\"\r\n                        >\r\n                          ‚úÖ Approve & Record Transaction\r\n                        </button>\r\n                        <button\r\n                          onClick={() => {\r\n                            setSelectedDocument(null)\r\n                            setReviewReceipt(null)\r\n                          }}\r\n                          className=\"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50\"\r\n                        >\r\n                          Cancel\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}"],"mappings":"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"}
{"version":3,"file":"Login-H0ZdU360.js","names":[],"sources":["../../src/pages/Login.tsx"],"sourcesContent":["import { useState } from 'react'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport { useAuthStore } from '../stores/authStore'\r\nimport toast from 'react-hot-toast'\r\n\r\nexport default function Login() {\r\n  const [formData, setFormData] = useState({\r\n    email: 'admin@hafjet.com',\r\n    password: 'admin123'\r\n  })\r\n  const [loading, setLoading] = useState(false)\r\n  const navigate = useNavigate()\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    setLoading(true)\r\n\r\n    try {\r\n      // First try to connect to the backend API\r\n      console.log('üîÑ Attempting backend authentication...')\r\n      \r\n      try {\r\n        const response = await fetch('http://localhost:3001/api/auth/login', {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n          body: JSON.stringify({\r\n            email: formData.email,\r\n            password: formData.password\r\n          }),\r\n        })\r\n\r\n        if (response.ok) {\r\n          const data = await response.json()\r\n          console.log('‚úÖ Backend authentication successful:', data)\r\n          \r\n          if (data.success) {\r\n            // Store real token and user data from backend\r\n            localStorage.setItem('authToken', data.data.token)\r\n            localStorage.setItem('user', JSON.stringify(data.data.user))\r\n            \r\n            // Update auth store\r\n            useAuthStore.getState().setUser(data.data.user)\r\n\r\n            toast.success('Login berjaya melalui backend! Selamat datang ke HAFJET Cloud Accounting System! üá≤üáæ')\r\n            navigate('/dashboard')\r\n            return\r\n          }\r\n        } else {\r\n          console.log('‚ùå Backend authentication failed:', response.status)\r\n        }\r\n      } catch (backendError) {\r\n        console.log('üîÑ Backend connection failed, falling back to mock authentication:', backendError)\r\n      }\r\n\r\n      // Fallback: Mock authentication for testing since backend might have connection issues\r\n      if ((formData.email === 'admin@hafjet.com' && formData.password === 'admin123') ||\r\n          (formData.email === 'admin' && formData.password === 'password123')) {\r\n        console.log('‚úÖ Using mock authentication')\r\n        \r\n        // Simulate successful login with mock data\r\n        const mockUser = {\r\n          id: '1',\r\n          email: formData.email,\r\n          name: 'Administrator',\r\n          role: 'admin' as const,\r\n          createdAt: new Date().toISOString(),\r\n          updatedAt: new Date().toISOString()\r\n        }\r\n\r\n        // Store mock token and user data\r\n        localStorage.setItem('authToken', 'mock-jwt-token-hafjet-bukku')\r\n        localStorage.setItem('user', JSON.stringify(mockUser))\r\n        \r\n        // Update auth store manually\r\n        useAuthStore.getState().setUser(mockUser)\r\n\r\n        toast.success('Login berjaya dengan mock! Selamat datang ke HAFJET Cloud Accounting System! üá≤üáæ')\r\n        navigate('/dashboard')\r\n      } else {\r\n        toast.error('Email atau password tidak betul. Sila cuba lagi.')\r\n      }\r\n    } catch (error) {\r\n      console.error('Login error:', error)\r\n      toast.error('Ralat sistem. Sila cuba lagi.')\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center p-4\">\r\n      <div className=\"max-w-md w-full\">\r\n        <div className=\"bg-white/80 backdrop-blur-lg rounded-3xl shadow-2xl p-8 border border-white/50\">\r\n          <div className=\"text-center mb-8\">\r\n            <h1 className=\"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent\">\r\n              üá≤üáæ HAFJET Cloud Accounting System\r\n            </h1>\r\n            <p className=\"text-gray-600 mt-2\">Sistem Kewangan Malaysia</p>\r\n          </div>\r\n\r\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Email</label>\r\n              <input\r\n                type=\"email\"\r\n                value={formData.email}\r\n                onChange={(e) => setFormData({...formData, email: e.target.value})}\r\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Password</label>\r\n              <input\r\n                type=\"password\"\r\n                value={formData.password}\r\n                onChange={(e) => setFormData({...formData, password: e.target.value})}\r\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <button\r\n              type=\"submit\"\r\n              disabled={loading}\r\n              className=\"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 rounded-xl hover:shadow-lg transition-all duration-300 disabled:opacity-50\"\r\n            >\r\n              {loading ? 'Memuat...' : 'Log Masuk'}\r\n            </button>\r\n          </form>\r\n\r\n          <p className=\"text-center text-sm text-gray-600 mt-6\">\r\n            Demo: admin@hafjet.com / admin123\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}"],"mappings":"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"}
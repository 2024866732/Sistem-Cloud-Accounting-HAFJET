{"version":3,"mappings":";ihCAUA,MAAa,EAAuB,IAClC,UAAY,EAAW,CAsDZ,OACP,OAAO,OAAW,IAAoB,EAAE,CACrC,KAAK,MAAM,aAAa,QAAQ,sBAAsB,EAAI,KAAK,CAI3D,OAA6B,CACpC,OAAO,OAAW,MACpB,aAAa,WAAW,sBAAsB,CAC9C,aAAa,WAAW,eAAe,GCrE3C,IAAM,EAAM,EAAM,OAAO,CACvB,yCACA,QAAS,IACT,QAAS,CACP,eAAgB,mBACjB,CACF,CAAC,CAGF,EAAI,aAAa,QAAQ,IACtB,GAAW,CACV,IAAM,EAAQ,aAAa,QAAQ,YAAY,CAI/C,OAHI,IACF,EAAO,QAAQ,cAAgB,UAAU,KAEpC,GAER,GACQ,QAAQ,OAAO,EAAM,CAE/B,CAGD,EAAI,aAAa,SAAS,IACvB,GACQ,EAER,IACK,EAAM,UAAU,SAAW,MAE7B,aAAa,WAAW,YAAY,CACpC,OAAO,SAAS,KAAO,UAElB,QAAQ,OAAO,EAAM,EAE/B,CAGD,MAAa,EAAc,CACzB,MAAO,MAAO,EAAe,KACV,MAAM,EAAI,KAAoD,cAAe,CAC5F,QACA,WACD,CAAC,EACc,KAGlB,SAAU,KAAO,KAME,MAAM,EAAI,KAAoD,iBAAkB,EAAS,EAC1F,KAGlB,OAAQ,SAAY,CAClB,IAAM,EAAW,MAAM,EAAI,KAAkB,eAAe,CAE5D,OADA,aAAa,WAAW,YAAY,CAC7B,EAAS,MAGlB,eAAgB,UACG,MAAM,EAAI,IAA0B,WAAW,EAChD,KAEnB,CAuKY,EAAkB,CAE7B,mBAAoB,UACD,MAAM,EAAI,IAA0B,oBAAoB,EACzD,KAGlB,sBAAuB,KAAO,KACX,MAAM,EAAI,IAA0B,oBAAqB,EAAS,EACnE,KAIlB,eAAgB,UACG,MAAM,EAAI,IAA0B,gBAAgB,EACrD,KAGlB,kBAAmB,KAAO,KACP,MAAM,EAAI,IAA0B,gBAAiB,EAAS,EAC/D,KAIlB,kBAAmB,UACA,MAAM,EAAI,IAA0B,mBAAmB,EACxD,KAGlB,qBAAsB,KAAO,KACV,MAAM,EAAI,IAA0B,mBAAoB,EAAS,EAClE,KAIlB,SAAU,UACS,MAAM,EAAI,IAA0B,kBAAkB,EACvD,KAGlB,WAAY,KAAO,KACA,MAAM,EAAI,KAA2B,kBAAmB,EAAS,EAClE,KAGlB,WAAY,MAAO,EAAY,KACZ,MAAM,EAAI,IAA0B,mBAAmB,IAAM,EAAS,EACvE,KAGlB,WAAY,KAAO,KACA,MAAM,EAAI,OAA6B,mBAAmB,IAAK,EAChE,KAEnB,CAmBD,MAAe,ECvSf,MAAa,EAAe,GAAmB,CAC7C,GACG,EAAK,KAAS,CACb,KAAM,KACN,MAAO,KACP,gBAAiB,GACjB,UAAW,GAEX,MAAO,MAAO,EAAe,IAAqB,CAChD,EAAI,CAAE,UAAW,GAAM,CAAC,CACxB,GAAI,CACF,IAAM,EAAW,MAAM,EAAY,MAAM,EAAO,EAAS,CACzD,GAAI,EAAS,SAAW,EAAS,KAAM,CACrC,GAAM,CAAE,QAAO,QAAS,EAAS,KACjC,aAAa,QAAQ,YAAa,EAAM,CACxC,EAAI,CACF,OACA,QACA,gBAAiB,GACjB,UAAW,GACZ,CAAC,MAEF,MAAU,MAAM,EAAS,SAAW,eAAe,OAE9C,EAAO,CAGd,MAFA,EAAI,CAAE,UAAW,GAAO,CAAC,CACzB,QAAQ,MAAM,eAAgB,EAAM,CAC9B,IAIV,SAAU,KAAO,IAAa,CAC5B,EAAI,CAAE,UAAW,GAAM,CAAC,CACxB,GAAI,CACF,IAAM,EAAW,MAAM,EAAY,SAAS,EAAS,CACrD,GAAI,EAAS,SAAW,EAAS,KAAM,CACrC,GAAM,CAAE,QAAO,QAAS,EAAS,KACjC,aAAa,QAAQ,YAAa,EAAM,CACxC,EAAI,CACF,OACA,QACA,gBAAiB,GACjB,UAAW,GACZ,CAAC,MAEF,MAAU,MAAM,EAAS,SAAW,sBAAsB,OAErD,EAAO,CAGd,MAFA,EAAI,CAAE,UAAW,GAAO,CAAC,CACzB,QAAQ,MAAM,sBAAuB,EAAM,CACrC,IAIV,WAAc,CACZ,aAAa,WAAW,YAAY,CACpC,EAAI,CACF,KAAM,KACN,MAAO,KACP,gBAAiB,GACjB,UAAW,GACZ,CAAC,EAGJ,UAAW,SAAY,CACrB,IAAM,EAAQ,aAAa,QAAQ,YAAY,CACzC,EAAa,aAAa,QAAQ,OAAO,CAE/C,GAAI,CAAC,GAAS,CAAC,EAAY,CACzB,EAAI,CAAE,gBAAiB,GAAO,UAAW,GAAO,CAAC,CACjD,OAGF,EAAI,CAAE,UAAW,GAAM,CAAC,CACxB,GAAI,CAEF,IAAM,EAAO,KAAK,MAAM,EAAW,CACnC,EAAI,CACF,OACA,QACA,gBAAiB,GACjB,UAAW,GACZ,CAAC,OACK,EAAO,CACd,QAAQ,MAAM,oBAAqB,EAAM,CAEzC,aAAa,WAAW,YAAY,CACpC,aAAa,WAAW,OAAO,CAC/B,EAAI,CACF,KAAM,KACN,MAAO,KACP,gBAAiB,GACjB,UAAW,GACZ,CAAC,GAIN,QAAU,GAAe,CACvB,EAAI,CACF,OACA,gBAAiB,GACjB,MAAO,aAAa,QAAQ,YAAY,EAAI,KAC7C,CAAC,EAEL,EACD,CACE,KAAM,eACN,WAAa,IAAW,CACtB,KAAM,EAAM,KACZ,MAAO,EAAM,MACb,gBAAiB,EAAM,gBACxB,EACF,CACF,CACF,cC5FK,sBAAyE,OAAU,CAQzF,SAAgB,EAAqB,CAAE,YAAuC,CAC5E,GAAM,CAAC,EAAQ,kBAAqC,KAAK,CACnD,CAAC,EAAe,kBAA6C,EAAE,CAAC,CAChE,CAAC,EAAa,kBAA2B,GAAM,CAC/C,CAAE,QAAO,QAAS,GAAc,CAEhC,EAAc,EAAc,OAAO,GAAK,CAAC,EAAE,KAAK,CAAC,OAoNvD,OAjNA,mBAAgB,CAQd,GAAI,GAAS,EAAM,CACjB,QAAQ,IAAI,2CAA2C,CAGvD,IAAM,mCACN,QAAQ,IAAI,oBAAqB,EAAU,CAE3C,IAAM,EAAY,EAAG,EAAW,CAC9B,KAAM,CACG,QACP,OAAQ,EAAK,GACb,UAAW,EAAK,MACjB,CAED,WAAY,CAAC,YAAa,UAAU,CAEpC,gBAAiB,GACjB,QAAS,IACT,QAAS,EACT,YAAa,GACb,SAAU,GACX,CAAC,CAmHF,OAjHA,EAAU,GAAG,cAAiB,CAC5B,QAAQ,IAAI,sCAAsC,CAClD,EAAe,GAAK,CACpB,EAAM,QAAQ,oCAAoC,CAGlD,eAAiB,CACf,EAAU,KAAK,oBAAoB,EAClC,IAAK,EACR,CAEF,EAAU,GAAG,aAAe,GAAW,CACrC,QAAQ,IAAI,4CAA6C,EAAO,CAChE,EAAe,GAAM,CAGjB,IAAW,wBACb,EAAM,MAAM,uCAAuC,CAIjD,IAAW,wBACb,eAAiB,CACf,QAAQ,IAAI,gCAAgC,CAC5C,EAAU,SAAS,EAClB,IAAK,EAEV,CAEF,EAAU,GAAG,gBAAkB,GAAU,CAEvC,QAAQ,MAAM,mCAAoC,EAAO;EAAM,CAC7D,QAAU,GAAe,QACzB,MAAQ,GAAe,MACvB,eAAiB,GAAe,UACjC,CAAC,CACF,EAAe,GAAM,CAGrB,IAAM,EAAO,GAAS,EAAM,QAAW,OAAO,EAAM,QAAQ,CAAC,aAAa,CAAG,GAC7E,GAAI,EAAI,SAAS,YAAY,EAAI,EAAI,SAAS,YAAY,EAAI,EAAI,SAAS,MAAM,EAAI,EAAI,SAAS,OAAO,CAAE,CACzG,QAAQ,IAAI,yFAAyF,CACrG,GAAI,CACF,EAAU,GAAG,KAAK,WAAa,CAAC,UAAU,CAC1C,eAAiB,CACf,EAAU,SAAS,EAClB,IAAK,OACD,EAAG,CACV,QAAQ,MAAM,8BAA+B,EAAE,CAC/C,EAAM,MAAM,8CAA+C,GAAe,SAAY,GAAW,UAAU,OAG7G,EAAM,MAAM,8CAA8C,GAAO,SAAW,kBAAkB,EAEhG,CAEF,EAAU,GAAG,YAAc,GAAkB,CAC3C,QAAQ,IAAI,wBAAwB,EAAc,WAAW,CAC7D,EAAe,GAAK,CACpB,EAAM,QAAQ,4BAA4B,EAC1C,CAEF,EAAU,GAAG,kBAAoB,GAAU,CACzC,QAAQ,MAAM,yBAA0B,EAAM,QAAQ,EACtD,CAGF,EAAU,GAAG,eAAiB,GAA+B,CAC3D,QAAQ,IAAI,uBAAwB,EAAa,CAEjD,EAAiB,GAAQ,CAAC,EAAc,GAAG,EAAK,CAAC,CAGjD,IAAM,EAAe,CACnB,SAAU,EAAa,WAAa,SAAW,IACtC,EAAa,WAAa,OAAS,IAAO,IACnD,KAAM,EAAoB,EAAa,KAAK,CAC7C,CAEG,EAAa,WAAa,SAC5B,EAAM,MAAM,GAAG,EAAa,MAAM,IAAI,EAAa,UAAW,EAAa,CAClE,EAAa,WAAa,OACnC,EAAM,QAAQ,GAAG,EAAa,MAAM,IAAI,EAAa,UAAW,EAAa,CAE7E,EAAM,GAAG,EAAa,MAAM,IAAI,EAAa,UAAW,EAAa,EAInE,EAAa,WAAa,UAAY,EAAa,WAAa,SAClE,GAAuB,EAEzB,CAGF,EAAU,GAAG,sBAAwB,GAA+B,CAClE,QAAQ,IAAI,0BAA2B,EAAa,CAEpD,EAAiB,GAAQ,CAAC,EAAc,GAAG,EAAK,CAAC,CACjD,EAAM,MAAM,iBAAiB,EAAa,UAAW,CACnD,SAAU,IACV,KAAM,KACP,CAAC,CACF,GAAuB,EACvB,CAGF,EAAU,GAAG,uBAAyB,GAAiE,CACrG,QAAQ,IAAI,2BAA4B,EAAK,CAC7C,EAAiB,EAAK,eAAiB,EAAE,CAAC,EAC1C,CAEF,EAAU,EAAU,KAEP,CACX,QAAQ,IAAI,mCAAmC,CAC/C,EAAU,YAAY,IAGzB,CAAC,EAAO,EAAK,CAAC,EA6Df,SAAC,EAAoB,UAAS,MAAO,CACnC,SACA,gBACA,cACA,cACA,WAhEgB,GAAe,CACjC,EAAiB,GACf,EAAK,IAAI,GACP,EAAa,KAAO,EAChB,CAAE,GAAG,EAAc,KAAM,GAAM,CAC/B,EACL,CACF,CAEG,GACF,EAAO,KAAK,yBAA0B,EAAG,EAuDzC,kBAnDwB,CAC1B,EAAiB,GACf,EAAK,IAAI,IAAiB,CAAE,GAAG,EAAc,KAAM,GAAM,EAAE,CAC5D,CAED,EAAc,QAAQ,GAAgB,CAChC,GAAU,CAAC,EAAa,MAC1B,EAAO,KAAK,yBAA0B,EAAa,GAAG,EAExD,EA2CA,yBAxC+B,CAC7B,GAAU,GAEZ,EAAO,KAAK,oBAAoB,CAChC,EAAM,QAAQ,wCAAwC,EAGtD,MAAM,8CAA+C,CACnD,OAAQ,OACR,QAAS,CACP,eAAgB,mBACjB,CACD,KAAM,KAAK,UAAU,CACnB,OAAQ,GAAM,IAAM,IACpB,QAAS,mCACV,CAAC,CACH,CAAC,CACD,KAAK,GAAO,EAAI,MAAM,CAAC,CACvB,KAAK,GAAQ,CACR,EAAK,QACP,EAAM,QAAQ,kCAAkC,CAEhD,EAAM,MAAM,mCAAmC,EAEjD,CACD,MAAM,GAAO,CACZ,QAAQ,MAAM,oCAAqC,EAAI,CACvD,EAAM,MAAM,mCAAmC,EAC/C,EAaH,CACE,YAC4B,CAInC,SAAS,EAAoB,EAAoC,CAC/D,OAAQ,EAAR,CACE,IAAK,kBACH,MAAO,KACT,IAAK,oBACH,MAAO,IACT,IAAK,aACH,MAAO,KACT,IAAK,eACH,MAAO,KACT,IAAK,mBACH,MAAO,KACT,IAAK,oBACH,MAAO,KACT,IAAK,mBACH,MAAO,KACT,IAAK,wBACH,MAAO,KACT,IAAK,qBACH,MAAO,KACT,IAAK,uBACH,MAAO,KACT,IAAK,mBACH,MAAO,IACT,QACE,MAAO,MAIb,SAAS,GAAwB,CAC/B,GAAI,CAEF,IAAM,EAAe,IAAK,OAAO,cAAiB,OAAkE,oBAC9G,EAAa,EAAa,kBAAkB,CAC5C,EAAW,EAAa,YAAY,CAE1C,EAAW,QAAQ,EAAS,CAC5B,EAAS,QAAQ,EAAa,YAAY,CAE1C,EAAW,UAAU,eAAe,IAAK,EAAa,YAAY,CAClE,EAAW,UAAU,eAAe,IAAK,EAAa,YAAc,GAAI,CAExE,EAAS,KAAK,eAAe,GAAK,EAAa,YAAY,CAC3D,EAAS,KAAK,6BAA6B,IAAM,EAAa,YAAc,GAAI,CAEhF,EAAW,MAAM,EAAa,YAAY,CAC1C,EAAW,KAAK,EAAa,YAAc,GAAI,OACxC,EAAO,CACd,QAAQ,IAAI,qCAAsC,EAAM,ECrU5D,SAAgB,GAAmB,CACjC,IAAM,mBAAqB,EAAoB,CAC/C,GAAI,IAAY,OAcd,MAAU,MAAM,8DAA8D,CAEhF,OAAO,EChBT,SAAwB,GAAqB,CAC3C,GAAM,CAAE,gBAAe,cAAa,aAAY,gBAAe,cAAa,wBAAyB,GAAkB,CACjH,CAAC,EAAQ,kBAAsB,GAAM,CACrC,CAAC,EAAQ,kBAAwC,MAAM,CAEvD,EAAwB,IAAW,SACrC,EAAc,OAAO,GAAK,CAAC,EAAE,KAAK,CAClC,EAEE,EAAoB,GAAqB,CAC7C,OAAQ,EAAR,CACE,IAAK,SAAU,MAAO,+CACtB,IAAK,OAAQ,MAAO,wDACpB,IAAK,SAAU,MAAO,kDACtB,IAAK,MAAO,MAAO,mFACnB,QAAS,MAAO,qFAId,EAAmB,GAAqB,CAC5C,OAAQ,EAAR,CACE,IAAK,SAAU,OAAO,SAAC,GAAY,UAAU,wBAAyB,CACtE,IAAK,OAAQ,OAAO,SAAC,GAAY,UAAU,2BAA4B,CACvE,IAAK,SAAU,OAAO,SAAC,GAAK,UAAU,yBAA0B,CAChE,IAAK,MAAO,OAAO,SAAC,GAAY,UAAU,oCAAqC,CAC/E,QAAS,OAAO,SAAC,GAAK,UAAU,oCAAqC,GAInE,EAAe,GAAiB,CACpC,OAAQ,EAAR,CACE,IAAK,kBAAmB,MAAO,KAC/B,IAAK,oBAAqB,MAAO,IACjC,IAAK,aAAc,MAAO,KAC1B,IAAK,eAAgB,MAAO,KAC5B,IAAK,mBAAoB,MAAO,KAChC,IAAK,oBAAqB,MAAO,KACjC,QAAS,MAAO,OAIpB,OACE,UAAC,OAAI,UAAU,sBAEb,UAAC,UACC,YAAe,EAAU,CAAC,EAAO,CACjC,UAAU;;kGAIV,SAAC,GAAK,UAAW,0CACf,EAAc,kEAAoE,8BAC9E,CAGL,EAAc,IACb,SAAC,QAAK,UAAU;;yEAGb,EAAc,GAAK,MAAQ,GACvB,EAIT,SAAC,OAAI,UAAW,gFACd,EACI,qDACA,8BACA,GACC,CAGR,IACC,iCAEE,SAAC,OACC,UAAU,4DACV,YAAe,EAAU,GAAM,EAC/B,EAGF,UAAC,OAAI,UAAU;;;mEAMb,UAAC,OAAI,UAAU,iFAEb,SAAC,OAAI,UAAU,wCACb,SAAC,OAAI,UAAU,sIAA2I,EACtJ,EAEN,UAAC,OAAI,UAAU,wDACb,UAAC,OAAI,UAAU,yCACb,SAAC,OAAI,UAAU;mHAEb,SAAC,GAAK,UAAU,qCAAsC,EAClD,EACN,UAAC,kBACC,SAAC,MAAG,UAAU,wCAA+B,oBAAqB,EAClE,UAAC,KAAE,UAAU,6CACV,EAAsB,OAAO,gBAC5B,GACA,GACF,EAEN,UAAC,OAAI,UAAU,yCAEb,UAAC,OAAI,UAAW,8DACd,EACI,4DACA,kEAEH,GAAc,SAAC,GAAK,UAAU,WAAY,EAAG,SAAC,GAAQ,UAAU,WAAY,EAC7E,SAAC,iBAAM,EAAc,OAAS,WAAiB,GAC3C,EAEN,SAAC,UACC,YAAe,EAAU,GAAM,CAC/B,UAAU;4EAGV,SAAC,GAAE,UAAU,WAAY,EAClB,GACL,GACF,GACF,EAGN,SAAC,OAAI,UAAU,uDACb,UAAC,OAAI,UAAU,qEACb,UAAC,UACC,YAAe,EAAU,MAAM,CAC/B,UAAW,+EACT,IAAW,MACP,6IACA,wFAEP,UACS,EAAc,OAAO,MACtB,EACT,UAAC,UACC,YAAe,EAAU,SAAS,CAClC,UAAW,+EACT,IAAW,SACP,6IACA,wFAEP,eACc,EAAY,MAClB,GACL,EACF,EAGN,SAAC,OAAI,UAAU,oCACZ,EAAsB,OAAS,GAC9B,SAAC,OAAI,UAAU,yBACZ,EAAsB,KAAK,EAAc,KACxC,UAAC,OAEC,YAAe,EAAW,EAAa,GAAG,CAC1C,UAAW;;;0BAGP,EAAa,KACX,iEACA;wBAGN,MAAO,CAAE,eAAgB,GAAG,EAAQ,IAAI,IAAK,YAG7C,UAAC,OAAI,UAAU,4BAEb,SAAC,OAAI,UAAU,0BACb,SAAC,OAAI,UAAW;;8BAEZ,EAAiB,EAAa,SAAS,CAAC;qCAEzC,EAAY,EAAa,KAAK,EAC3B,EACF,EAGN,UAAC,OAAI,UAAU,4BACb,UAAC,OAAI,UAAU,8CACb,UAAC,OAAI,UAAU,oBACb,SAAC,MAAG,UAAU,kGACX,EAAa,OACX,EACL,SAAC,KAAE,UAAU,8DACV,EAAa,SACZ,GACA,EAEN,UAAC,OAAI,UAAU,6CACZ,EAAgB,EAAa,SAAS,CACtC,CAAC,EAAa,OACb,SAAC,OAAI,UAAU,8DAA+D,GAE5E,GACF,EAGN,UAAC,OAAI,UAAU,oDACb,SAAC,QAAK,UAAU,4CACb,EAAO,IAAI,KAAK,EAAa,UAAU,CAAE,mBAAmB,EACxD,EAGP,SAAC,QAAK,UAAW,8CAA8C,EAAiB,EAAa,SAAS,YACnG,EAAa,UACT,GACH,GACF,GACF,EAGN,SAAC,OAAI,UAAU;mHAAA,CACgF,GA5D1F,EAAa,GA6Dd,CACN,EACE,EAEN,UAAC,OAAI,UAAU,6BACb,SAAC,OAAI,UAAU,2GACb,SAAC,GAAK,UAAU,oCAAqC,EACjD,EACN,SAAC,KAAE,UAAU,gDAAuC,oBAAoB,EACxE,SAAC,KAAE,UAAU,iDACV,IAAW,SAAW,gCAAkC,yCACvD,GACA,EAEJ,EAGN,UAAC,OAAI,UAAU,kFACb,UAAC,OAAI,UAAU,4BACb,UAAC,UACC,QAAS,EACT,UAAU,gCACV,SAAU,IAAgB,aAE1B,SAAC,GAAY,UAAU,gBAAiB,yBAEjC,EAET,UAAC,UACC,QAAS,EACT,UAAU,8CAEV,SAAC,GAAI,UAAU,gBAAiB,UAEzB,GACL,EAGN,UAAC,OAAI,UAAU,8DAAoD,WACxD,EAAc,gBAAkB,cAAc,aAC/C,EAAc,OAAO,kBAChB,IACT,GACF,GACF,GACL,GAED,CCxQV,SAAwB,EAAO,CAAE,YAAyB,CACxD,IAAM,EAAW,GAAa,CACxB,CAAE,OAAM,UAAW,GAAc,CACjC,CAAC,EAAY,kBAA0B,GAAM,CAE7C,CAAC,EAAW,kBAAyB,GAAM,EAGjD,mBAAgB,CACd,GAAI,CACa,aAAa,QAAQ,2BAA2B,GAChD,QAAQ,EAAa,GAAK,MACnC,IAGP,EAAE,CAAC,EAGN,mBAAgB,CACd,GAAI,CACF,aAAa,QAAQ,2BAA4B,EAAY,OAAS,QAAQ,MACxE,IAGP,CAAC,EAAU,CAAC,CAEf,IAAM,EAAa,CACjB,CAAE,KAAM,YAAa,KAAM,aAAc,KAAM,KAAM,SAAU,OAAQ,CACvE,CAAE,KAAM,YAAa,KAAM,aAAc,KAAM,KAAM,SAAU,WAAY,CAC3E,CAAE,KAAM,aAAc,KAAM,cAAe,KAAM,IAAK,SAAU,WAAY,CAC5E,CAAE,KAAM,YAAa,KAAM,aAAc,KAAM,KAAM,SAAU,OAAQ,CACvE,CAAE,KAAM,UAAW,KAAM,WAAY,KAAM,KAAM,SAAU,OAAQ,CACnE,CAAE,KAAM,WAAY,KAAM,YAAa,KAAM,KAAM,SAAU,OAAQ,CACrE,CAAE,KAAM,iBAAkB,KAAM,YAAa,KAAM,OAAQ,SAAU,OAAQ,CAC7E,CAAE,KAAM,eAAgB,KAAM,gBAAiB,KAAM,KAAM,SAAU,OAAQ,CAC7E,CAAE,KAAM,YAAa,KAAM,aAAc,KAAM,KAAM,SAAU,OAAQ,CACvE,CAAE,KAAM,kBAAmB,KAAM,mBAAoB,KAAM,KAAM,SAAU,WAAY,CACvF,CAAE,KAAM,UAAW,KAAM,WAAY,KAAM,KAAM,SAAU,OAAQ,CACnE,CAAE,KAAM,kBAAmB,KAAM,QAAS,KAAM,KAAM,SAAU,WAAY,CAC5E,CAAE,KAAM,WAAY,KAAM,YAAa,KAAM,MAAO,SAAU,SAAU,CACxE,CAAE,KAAM,cAAe,KAAM,eAAgB,KAAM,IAAK,SAAU,SAAU,CAC5E,CAAE,KAAM,kBAAmB,KAAM,SAAU,KAAM,KAAM,SAAU,SAAU,CAC3E,CAAE,KAAM,WAAY,KAAM,YAAa,KAAM,KAAM,SAAU,SAAU,CACxE,CAEK,EAAiB,EAAW,OAAO,GAAQ,EAAK,WAAa,OAAO,CACpE,EAAqB,EAAW,OAAO,GAAQ,EAAK,WAAa,WAAW,CAC5E,EAAmB,EAAW,OAAO,GAAQ,EAAK,WAAa,SAAS,CAE9E,OACE,UAAC,OAAI,UAAU,+HAGb,UAAC,SACC,cAAY,UACZ,iBAAgB,EAAY,OAAS,QACrC,UAAW,sBAAsB,EAAY,OAAS,OAAO,uKAC7D,aAAW,gBACX,gBAAe,CAAC,aAGhB,SAAC,OAAI,UAAU,iCAAkC,EAEjD,SAAC,OAAI,UAAU,sDAAsD,MAAO,CAAC,gBAAgB,gEAAgE,EAAI,EAEjK,UAAC,OAAI,UAAU,kEAEb,UAAC,OAAI,UAAW,qBAAqB,EAAY,iBAAmB,YAAY,kBAC9E,SAAC,OAAI,UAAU,yKACb,SAAC,QAAK,UAAU,wCAA+B,KAAQ,EACnD,CACL,CAAC,IACA,UAAC,OAAI,UAAU,qBACb,SAAC,QAAK,UAAU,qEAA4D,gBAAmB,EAC/F,SAAC,QAAK,UAAU,iEAAwD,qBAAwB,GAC5F,GAEJ,EAEN,UAAC,OAAI,UAAU,uBAEb,UAAC,kBACC,SAAC,MAAG,UAAU,yFAAgF,iBAAkB,EAChH,SAAC,OAAI,UAAU,qBACZ,EAAe,IAAK,GAAS,CAC5B,IAAM,EAAW,EAAS,WAAa,EAAK,KAC5C,OACE,UAAC,GAEC,GAAI,EAAK,KACT,eAAc,EAAW,OAAS,OAClC,MAAO,EAAY,EAAK,KAAO,OAC/B,UAAW,GAAG,EACV,sGACA,yEACH,2BAA2B,EAAY,sBAAwB,OAAO,gJAEvE,SAAC,QAAK,UAAW,WAAW,EAAY,GAAK,kBAAW,EAAK,MAAY,CACxE,CAAC,IAAa,SAAC,iBAAM,EAAK,MAAY,GAVlC,EAAK,KAWL,EAET,EACE,GACF,EAGN,UAAC,kBACC,SAAC,MAAG,UAAU,2FAAkF,YAAa,EAC7G,SAAC,OAAI,UAAU,qBACZ,EAAmB,IAAK,GAAS,CAChC,IAAM,EAAW,EAAS,WAAa,EAAK,KAC5C,OACE,UAAC,GAEC,GAAI,EAAK,KACT,eAAc,EAAW,OAAS,OAClC,MAAO,EAAY,EAAK,KAAO,OAC/B,UAAW,GAAG,EACV,0GACA,yEACH,2BAA2B,EAAY,sBAAwB,OAAO,kJAEvE,SAAC,QAAK,UAAW,WAAW,EAAY,GAAK,kBAAW,EAAK,MAAY,CACxE,CAAC,IAAa,SAAC,iBAAM,EAAK,MAAY,GAVlC,EAAK,KAWL,EAET,EACE,GACF,EAGN,UAAC,kBACC,SAAC,MAAG,UAAU,0FAAiF,UAAW,EAC1G,SAAC,OAAI,UAAU,qBACZ,EAAiB,IAAK,GAAS,CAC9B,IAAM,EAAW,EAAS,WAAa,EAAK,KAC5C,OACE,UAAC,GAEC,GAAI,EAAK,KACT,eAAc,EAAW,OAAS,OAClC,MAAO,EAAY,EAAK,KAAO,OAC/B,UAAW,GAAG,EACV,6JACA,4EACH,2BAA2B,EAAY,sBAAwB,OAAO,iJAEvE,SAAC,QAAK,UAAW,WAAW,EAAY,GAAK,kBAAW,EAAK,MAAY,CACxE,CAAC,IAAa,SAAC,iBAAM,EAAK,MAAY,GAVlC,EAAK,KAWL,EAET,EACE,GACF,GACF,GACF,EAGN,SAAC,OAAI,UAAW,+EAA+E,EAAY,OAAS,eAClH,UAAC,OAAI,UAAW,uDAAuD,EAAY,iCAAmC,MAAM,mDAC1H,UAAC,OAAI,UAAW,QAAQ,EAAY,kCAAoC,yBAAyB,kBAC/F,SAAC,OAAI,UAAU,yKACZ,GAAM,MAAM,OAAO,EAAE,EAAI,KACtB,CACL,CAAC,IACA,UAAC,OAAI,UAAU,4BACb,SAAC,KAAE,UAAU,qDACV,GAAM,MAAQ,QACb,EACJ,SAAC,KAAE,UAAU,qDACV,GAAM,OAAS,mBACd,GACA,GAEJ,EACN,SAAC,UACC,QAAS,EACT,UAAW,kGAAkG,EAAY,oBAAsB,oBAAoB,8FAElK,EAAY,KAAO,iBACb,GACL,EACF,GACA,EAKR,UAAC,OAAI,UAAU,2DAEb,UAAC,UAAO,UAAU,6LAEhB,SAAC,OAAI,UAAU,mBAAmB,MAAO,CACvC,gBAAiB;;cAGjB,UAAW,+BACZ,EAAI,EAEL,UAAC,OAAI,UAAU,wDACb,UAAC,OAAI,UAAU,+CAEb,UAAC,OAAI,UAAU,yCAEb,SAAC,UACC,KAAK,SACL,YAAe,EAAc,GAAK,CAClC,UAAU,kRACV,aAAW,iCAEX,SAAC,OAAI,UAAU,UAAU,KAAK,OAAO,OAAO,eAAe,QAAQ,YAAY,cAAY,iBACzF,SAAC,QAAK,cAAc,QAAQ,eAAe,QAAQ,YAAa,EAAG,EAAE,2BAA4B,EAC7F,EACC,EAET,SAAC,UACC,KAAK,SACL,YAAe,EAAa,GAAK,CAAC,EAAE,CACpC,cAAY,kBACZ,UAAU,kRACV,aAAY,EAAY,iBAAmB,mBAC3C,eAAc,WAEb,GACC,SAAC,OAAI,UAAU,UAAU,QAAQ,YAAY,KAAK,yBAAe,SAAC,QAAK,SAAS,UAAU,EAAE,iIAAiI,SAAS,WAAY,EAAM,EAExP,SAAC,OAAI,UAAU,UAAU,QAAQ,YAAY,KAAK,yBAAe,SAAC,QAAK,SAAS,UAAU,EAAE,8HAA8H,SAAS,WAAY,EAAM,EAEhP,CAElB,IACC,UAAC,OACC,UAAU,+BACV,KAAK,SACL,aAAW,OACX,aAAW,oCAGX,SAAC,UACC,aAAW,wBACX,YAAe,EAAc,GAAM,CACnC,UAAU,kFACV,EAEF,UAAC,OACC,UAAU,oKACV,cAAY,2BAGZ,UAAC,OAAI,UAAU,iGACb,UAAC,OAAI,UAAU,yCACb,SAAC,OAAI,UAAU,2JACb,SAAC,QAAK,UAAU,wCAA+B,KAAQ,EACnD,EACN,UAAC,kBACC,SAAC,KAAE,UAAU,0DAAiD,gBAAgB,EAC9E,SAAC,KAAE,UAAU,+DAAsD,cAAc,GAC7E,GACF,EACN,SAAC,UACC,YAAe,EAAc,GAAM,CACnC,aAAW,aACX,UAAU,iKACX,KAEQ,GACL,EAGN,UAAC,OAAI,UAAU,mEAEb,UAAC,kBACC,SAAC,MAAG,UAAU,6FAAoF,QAAS,EAC3G,SAAC,OAAI,UAAU,qBACZ,EAAe,IAAI,GAAQ,CAC1B,IAAM,EAAS,EAAS,WAAa,EAAK,KAC1C,OACE,UAAC,GAEC,GAAI,EAAK,KACT,YAAe,EAAc,GAAM,CACnC,UAAW,GAAG,EACV,sGACA,yEACH,0GAED,SAAC,QAAK,UAAU,wBAAgB,EAAK,MAAY,EACjD,SAAC,iBAAM,EAAK,MAAY,GATnB,EAAK,KAUL,EAET,EACE,GACF,EAGN,UAAC,kBACC,SAAC,MAAG,UAAU,+FAAsF,YAAa,EACjH,SAAC,OAAI,UAAU,qBACZ,EAAmB,IAAI,GAAQ,CAC9B,IAAM,EAAS,EAAS,WAAa,EAAK,KAC1C,OACE,UAAC,GAEC,GAAI,EAAK,KACT,YAAe,EAAc,GAAM,CACnC,UAAW,GAAG,EACV,0GACA,yEACH,0GAED,SAAC,QAAK,UAAU,wBAAgB,EAAK,MAAY,EACjD,SAAC,iBAAM,EAAK,MAAY,GATnB,EAAK,KAUL,EAET,EACE,GACF,EAGN,UAAC,kBACC,SAAC,MAAG,UAAU,8FAAqF,UAAW,EAC9G,SAAC,OAAI,UAAU,qBACZ,EAAiB,IAAI,GAAQ,CAC5B,IAAM,EAAS,EAAS,WAAa,EAAK,KAC1C,OACE,UAAC,GAEC,GAAI,EAAK,KACT,YAAe,EAAc,GAAM,CACnC,UAAW,GAAG,EACV,6JACA,4EACH,0GAED,SAAC,QAAK,UAAU,wBAAgB,EAAK,MAAY,EACjD,SAAC,iBAAM,EAAK,MAAY,GATnB,EAAK,KAUL,EAET,EACE,GACF,GACF,EAGN,SAAC,OAAI,UAAU,oDACb,SAAC,UACC,YAAe,CAAE,GAAQ,CAAE,EAAc,GAAM,EAC/C,UAAU,oNACX,iBAEQ,EACL,GACF,GACF,EAIE,UAAC,OAAI,UAAU,mDACb,SAAC,OAAI,UAAU,yJACb,SAAC,QAAK,UAAU,wCAA+B,KAAQ,EACnD,EACN,SAAC,iBACC,SAAC,QAAK,UAAU,4DAAmD,UAAa,EAC5E,GACF,GACF,EAGN,UAAC,OAAI,UAAU,6BACb,SAAC,MAAG,UAAU,wLAA+K,yCAExL,EACL,SAAC,KAAE,UAAU,iDAAwC,0CAA0C,GAC3F,EAGN,UAAC,OAAI,UAAU,sDACb,SAAC,KAAqB,EAGtB,UAAC,OAAI,UAAU,mDACb,SAAC,QAAK,UAAU,0OAAiO,mBAE1O,EACP,SAAC,QAAK,UAAU,yMAAgM,iBAEzM,GACH,EAGN,SAAC,OAAI,UAAU,sBACb,SAAC,OAAI,UAAU,+KACZ,GAAM,MAAM,OAAO,EAAE,EAAI,KACtB,EACF,GACF,GACF,EAGN,SAAC,OAAI,UAAU,2BACb,SAAC,MAAG,UAAU,0JAAiJ,4BAE1J,EACD,GACF,GACC,EAGT,UAAC,QAAK,UAAU,iIAEd,SAAC,OAAI,UAAU,uCACb,SAAC,OAAI,UAAU,mBAAmB,MAAO,CACvC,gBAAiB;;;;gBAKlB,EAAI,EACD,EAGN,SAAC,OAAI,UAAU,uCACb,SAAC,OAAI,UAAU,qBACZ,YACG,EACF,GACD,GACH,GACF,CC7aV,IAAM,EAAY,YAA0B,OAAO,yDAAqB,CAClE,EAAQ,YAA0B,OAAO,mDAAiB,CAC1D,EAAW,YAA0B,OAAO,sDAAoB,CAChE,EAAW,YAA0B,OAAO,wDAAoB,CAChE,EAAW,YAA0B,OAAO,sDAAoB,CAChE,EAAe,YAA0B,OAAO,4DAAwB,CACxE,EAAU,YAA0B,OAAO,sDAAmB,CAC9D,EAAW,YAA0B,OAAO,uDAAoB,CAChE,GAAY,YAA0B,OAAO,0DAAqB,CAClE,EAAU,YAA0B,OAAO,sDAAmB,CAC9D,EAAiB,YAA0B,OAAO,6DAA0B,CAC5E,GAAoB,YAA0B,OAAO,gEAA6B,CAClF,GAAqB,YAA0B,OAAO,iEAA8B,CACpF,GAAyB,YAA0B,OAAO,qEAAkC,CAC5F,GAAiB,YAA0B,OAAO,6DAA0B,CAC5E,GAAiB,YAA0B,OAAO,6DAA0B,CAC5E,GAAoB,YAA0B,OAAO,gEAA6B,CAClF,GAAgB,YAA0B,OAAO,4DAAyB,CAC1E,GAAkB,YAA0B,OAAO,8DAA2B,CAC9E,GAAqB,YAA0B,OAAO,iEAA8B,CACpF,GAAwB,YAA0B,OAAO,oEAAiC,CAG1F,OACJ,UAAC,OAAI,UAAU,2DACb,SAAC,OAAI,UAAU,kEAAuE,EACtF,SAAC,QAAK,UAAU,sCAA6B,cAAiB,GAC1D,CAGR,SAAS,IAAM,CACb,GAAM,CAAE,kBAAiB,YAAW,aAAc,GAAc,CAC1D,CAAC,EAAc,kBAA4B,GAAM,CAqDvD,OAnDA,mBAAgB,EACD,SAAY,CACvB,GAAI,CACF,MAAM,GAAW,OACV,EAAO,CACd,QAAQ,MAAM,6BAA8B,EAAM,QAC1C,CACR,EAAgB,GAAK,KAInB,CAGN,IAAM,EAAU,eAAiB,CAC/B,EAAgB,GAAK,EACpB,IAAK,CAER,UAAa,aAAa,EAAQ,EACjC,CAAC,EAAU,CAAC,CAGX,GAAa,CAAC,GAEd,SAAC,OAAI,UAAU,wGACb,UAAC,OAAI,UAAU,sEACb,SAAC,OAAI,UAAU,4FAAiG,EAChH,SAAC,MAAG,UAAU,6CAAoC,6CAA8C,EAChG,SAAC,KAAE,UAAU,yBAAgB,uDAAuD,GAChF,EACF,CAIL,GAkBH,SAAC,aACC,UAAC,cACC,SAAC,aACC,SAAC,YAAS,UAAU,SAAC,KAAqB,WACxC,UAAC,cACC,SAAC,GAAM,KAAK,IAAI,SAAS,SAAC,KAAY,EAAI,EAC1C,SAAC,GAAM,KAAK,aAAa,SAAS,SAAC,KAAY,EAAI,EACnD,SAAC,GAAM,KAAK,aAAa,SAAS,SAAC,MAAoB,EAAI,EAC3D,SAAC,GAAM,KAAK,cAAc,SAAS,SAAC,MAAqB,EAAI,EAC7D,SAAC,GAAM,KAAK,aAAa,SAAS,SAAC,MAAyB,EAAI,EAChE,SAAC,GAAM,KAAK,WAAW,SAAS,SAAC,KAAU,EAAI,EAC/C,SAAC,GAAM,KAAK,YAAY,SAAS,SAAC,KAAW,EAAI,EACjD,SAAC,GAAM,KAAK,gBAAgB,SAAS,SAAC,KAAW,EAAI,EACrD,SAAC,GAAM,KAAK,gBAAgB,SAAS,SAAC,KAAW,EAAI,EACrD,SAAC,GAAM,KAAK,YAAY,SAAS,SAAC,KAAW,EAAI,EACjD,SAAC,GAAM,KAAK,mBAAmB,SAAS,SAAC,KAAW,EAAI,EACxD,SAAC,GAAM,KAAK,mBAAmB,SAAS,SAAC,KAAW,EAAI,EACxD,SAAC,GAAM,KAAK,qBAAqB,SAAS,SAAC,KAAW,EAAI,EAC1D,SAAC,GAAM,KAAK,gBAAgB,SAAS,SAAC,KAAe,EAAI,EACzD,SAAC,GAAM,KAAK,aAAa,SAAS,SAAC,MAAY,EAAI,EACnD,SAAC,GAAM,KAAK,mBAAmB,SAAS,SAAC,KAAiB,EAAI,EAC9D,SAAC,GAAM,KAAK,iBAAiB,SAAS,SAAC,MAAqB,EAAI,EAChE,SAAC,GAAM,KAAK,SAAS,SAAS,SAAC,MAAiB,EAAI,EACpD,SAAC,GAAM,KAAK,QAAQ,SAAS,SAAC,MAAiB,EAAI,EACnD,SAAC,GAAM,KAAK,YAAY,SAAS,SAAC,MAAoB,EAAI,EAC1D,SAAC,GAAM,KAAK,gBAAgB,SAAS,SAAC,MAAgB,EAAI,EAC1D,SAAC,GAAM,KAAK,uBAAuB,SAAS,SAAC,MAAkB,EAAI,EACnE,SAAC,GAAM,KAAK,eAAe,SAAS,SAAC,MAAwB,EAAI,EACjE,SAAC,GAAM,KAAK,WAAW,SAAS,SAAC,KAAU,EAAI,EAC/C,SAAC,GAAM,KAAK,uBAAuB,SAAS,SAAC,KAAU,EAAI,EAC3D,SAAC,GAAM,KAAK,yBAAyB,SAAS,SAAC,KAAU,EAAI,EAC7D,SAAC,GAAM,KAAK,qBAAqB,SAAS,SAAC,KAAU,EAAI,EACzD,SAAC,GAAM,KAAK,YAAY,SAAS,SAAC,KAAW,EAAI,EACjD,SAAC,GAAM,KAAK,IAAI,SAAS,SAAC,GAAS,GAAG,aAAa,YAAU,EAAI,GAC1D,EACA,EACJ,EACT,SAAC,GAAQ,SAAS,aAAc,GACzB,EACY,EAvDrB,SAAC,aACC,UAAC,OAAI,UAAU,uEACb,SAAC,YAAS,UAAU,SAAC,KAAqB,WACxC,UAAC,cACC,SAAC,GAAM,KAAK,SAAS,SAAS,SAAC,KAAQ,EAAI,EAC3C,SAAC,GAAM,KAAK,YAAY,SAAS,SAAC,KAAW,EAAI,EACjD,SAAC,GAAM,KAAK,IAAI,SAAS,SAAC,GAAS,GAAG,SAAS,YAAU,EAAI,GACtD,EACA,EACX,SAAC,GAAQ,SAAS,aAAc,GAC5B,EACC,CAgDf,OAAe,GCtHT,EAAO,SAAS,eAAe,OAAO,CACxC,GACF,gBAAW,EAAK,CAAC,QACf,SAAC,wBACC,SAAC,MAAM,EACI,CACd,CAED,QAAQ,MAAM,0BAA0B","names":[],"ignoreList":[],"sources":["../../src/utils/performance.ts","../../src/services/api.ts","../../src/stores/authStore.ts","../../src/hooks/useNotifications.tsx","../../src/hooks/useNotificationHook.ts","../../src/components/NotificationCenter.tsx","../../src/components/Layout.tsx","../../src/App.tsx","../../src/main.tsx"],"sourcesContent":["// Performance optimization utilities\r\nimport type { ComponentType } from 'react';\r\nimport { lazy } from 'react';\r\n\r\n// Preload function for better UX\r\nexport const preloadComponent = (importFunc: () => Promise<{ default: ComponentType }>) => {\r\n  return importFunc();\r\n};\r\n\r\n// Simple lazy component factory\r\nexport const createLazyComponent = (importFunc: () => Promise<{ default: ComponentType }>) => {\r\n  return lazy(importFunc);\r\n};\r\n\r\n// Performance metrics tracking\r\nexport const trackLoadTime = (componentName: string) => {\r\n  const startTime = performance.now();\r\n  \r\n  return () => {\r\n    const endTime = performance.now();\r\n    const loadTime = endTime - startTime;\r\n    \r\n    console.log(`🚀 ${componentName} loaded in ${loadTime.toFixed(2)}ms`);\r\n    \r\n    // Store metrics for analysis\r\n    if (typeof window !== 'undefined') {\r\n      const metrics = JSON.parse(localStorage.getItem('performance_metrics') || '[]');\r\n      metrics.push({\r\n        component: componentName,\r\n        loadTime,\r\n        timestamp: new Date().toISOString()\r\n      });\r\n      \r\n      // Keep only last 100 entries\r\n      if (metrics.length > 100) {\r\n        metrics.splice(0, metrics.length - 100);\r\n      }\r\n      \r\n      localStorage.setItem('performance_metrics', JSON.stringify(metrics));\r\n    }\r\n  };\r\n};\r\n\r\n// Performance monitoring hook\r\nexport const useLazyLoad = () => {\r\n  const preload = (importFunc: () => Promise<{ default: ComponentType }>) => {\r\n    return importFunc();\r\n  };\r\n\r\n  return { preload };\r\n};\r\n\r\n// Bundle size tracking\r\nexport const trackBundleSize = (bundleName: string, size: number) => {\r\n  if (typeof window !== 'undefined') {\r\n    const sizes = JSON.parse(localStorage.getItem('bundle_sizes') || '{}');\r\n    sizes[bundleName] = {\r\n      size,\r\n      timestamp: new Date().toISOString()\r\n    };\r\n    localStorage.setItem('bundle_sizes', JSON.stringify(sizes));\r\n  }\r\n};\r\n\r\n// Get performance metrics\r\nexport const getPerformanceMetrics = () => {\r\n  if (typeof window === 'undefined') return [];\r\n  return JSON.parse(localStorage.getItem('performance_metrics') || '[]');\r\n};\r\n\r\n// Clear performance data\r\nexport const clearPerformanceData = () => {\r\n  if (typeof window !== 'undefined') {\r\n    localStorage.removeItem('performance_metrics');\r\n    localStorage.removeItem('bundle_sizes');\r\n  }\r\n};","import axios from 'axios'\r\nimport type { AxiosResponse } from 'axios'\r\nimport type { ApiResponse } from '../types'\r\n\r\n// Create axios instance with base configuration\r\nconst api = axios.create({\r\n  baseURL: import.meta.env.VITE_API_URL || 'http://localhost:3001/api',\r\n  timeout: 30000,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n})\r\n\r\n// Request interceptor to add auth token\r\napi.interceptors.request.use(\r\n  (config) => {\r\n    const token = localStorage.getItem('authToken')\r\n    if (token) {\r\n      config.headers.Authorization = `Bearer ${token}`\r\n    }\r\n    return config\r\n  },\r\n  (error) => {\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\n// Response interceptor for error handling\r\napi.interceptors.response.use(\r\n  (response: AxiosResponse<ApiResponse>) => {\r\n    return response\r\n  },\r\n  (error) => {\r\n    if (error.response?.status === 401) {\r\n      // Clear auth token and redirect to login\r\n      localStorage.removeItem('authToken')\r\n      window.location.href = '/login'\r\n    }\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\n// Auth service\r\nexport const authService = {\r\n  login: async (email: string, password: string) => {\r\n    const response = await api.post<ApiResponse<{ token: string; user: unknown }>>('/auth/login', {\r\n      email,\r\n      password,\r\n    })\r\n    return response.data\r\n  },\r\n\r\n  register: async (userData: {\r\n    name: string\r\n    email: string\r\n    password: string\r\n    companyName: string\r\n  }) => {\r\n    const response = await api.post<ApiResponse<{ token: string; user: unknown }>>('/auth/register', userData)\r\n    return response.data\r\n  },\r\n\r\n  logout: async () => {\r\n    const response = await api.post<ApiResponse>('/auth/logout')\r\n    localStorage.removeItem('authToken')\r\n    return response.data\r\n  },\r\n\r\n  getCurrentUser: async () => {\r\n    const response = await api.get<ApiResponse<unknown>>('/auth/me')\r\n    return response.data\r\n  },\r\n}\r\n\r\n// Company service\r\nexport const companyService = {\r\n  getProfile: async () => {\r\n    const response = await api.get<ApiResponse<unknown>>('/companies/profile')\r\n    return response.data\r\n  },\r\n\r\n  updateProfile: async (companyData: unknown) => {\r\n    const response = await api.put<ApiResponse<unknown>>('/companies/profile', companyData)\r\n    return response.data\r\n  },\r\n}\r\n\r\n// Transaction service\r\nexport const transactionService = {\r\n  getTransactions: async (params?: {\r\n    page?: number\r\n    limit?: number\r\n    type?: string\r\n    startDate?: string\r\n    endDate?: string\r\n  }) => {\r\n    const response = await api.get<ApiResponse<unknown>>('/transactions', { params })\r\n    return response.data\r\n  },\r\n\r\n  createTransaction: async (transactionData: unknown) => {\r\n    const response = await api.post<ApiResponse<unknown>>('/transactions', transactionData)\r\n    return response.data\r\n  },\r\n\r\n  updateTransaction: async (id: string, transactionData: unknown) => {\r\n    const response = await api.put<ApiResponse<unknown>>(`/transactions/${id}`, transactionData)\r\n    return response.data\r\n  },\r\n\r\n  deleteTransaction: async (id: string) => {\r\n    const response = await api.delete<ApiResponse>(`/transactions/${id}`)\r\n    return response.data\r\n  },\r\n}\r\n\r\n// Invoice service\r\nexport const invoiceService = {\r\n  getInvoices: async (params?: {\r\n    page?: number\r\n    limit?: number\r\n    status?: string\r\n    startDate?: string\r\n    endDate?: string\r\n  }) => {\r\n    const response = await api.get<ApiResponse<unknown>>('/invoices', { params })\r\n    return response.data\r\n  },\r\n\r\n  createInvoice: async (invoiceData: unknown) => {\r\n    const response = await api.post<ApiResponse<unknown>>('/invoices', invoiceData)\r\n    return response.data\r\n  },\r\n\r\n  updateInvoice: async (id: string, invoiceData: unknown) => {\r\n    const response = await api.put<ApiResponse<unknown>>(`/invoices/${id}`, invoiceData)\r\n    return response.data\r\n  },\r\n\r\n  deleteInvoice: async (id: string) => {\r\n    const response = await api.delete<ApiResponse>(`/invoices/${id}`)\r\n    return response.data\r\n  },\r\n\r\n  sendInvoice: async (id: string, method: 'email' | 'whatsapp') => {\r\n    const response = await api.post<ApiResponse>(`/invoices/${id}/send`, { method })\r\n    return response.data\r\n  },\r\n\r\n  generatePDF: async (id: string) => {\r\n    const response = await api.get(`/invoices/${id}/pdf`, {\r\n      responseType: 'blob',\r\n    })\r\n    return response.data\r\n  },\r\n}\r\n\r\n// E-Invoice service\r\nexport const einvoiceService = {\r\n  submitToLHDN: async (invoiceId: string) => {\r\n    const response = await api.post<ApiResponse<unknown>>(`/einvoice/submit/${invoiceId}`)\r\n    return response.data\r\n  },\r\n\r\n  getStatus: async (invoiceId: string) => {\r\n    const response = await api.get<ApiResponse<unknown>>(`/einvoice/status/${invoiceId}`)\r\n    return response.data\r\n  },\r\n\r\n  cancelEInvoice: async (invoiceId: string, reason: string) => {\r\n    const response = await api.post<ApiResponse>(`/einvoice/cancel/${invoiceId}`, { reason })\r\n    return response.data\r\n  },\r\n}\r\n\r\n// Report service\r\nexport const reportService = {\r\n  getProfitLoss: async (startDate: string, endDate: string) => {\r\n    const response = await api.get<ApiResponse<unknown>>('/reports/profit-loss', {\r\n      params: { startDate, endDate },\r\n    })\r\n    return response.data\r\n  },\r\n\r\n  getBalanceSheet: async (date: string) => {\r\n    const response = await api.get<ApiResponse<unknown>>('/reports/balance-sheet', {\r\n      params: { date },\r\n    })\r\n    return response.data\r\n  },\r\n\r\n  getCashFlow: async (startDate: string, endDate: string) => {\r\n    const response = await api.get<ApiResponse<unknown>>('/reports/cash-flow', {\r\n      params: { startDate, endDate },\r\n    })\r\n    return response.data\r\n  },\r\n\r\n  getTrialBalance: async (date: string) => {\r\n    const response = await api.get<ApiResponse<unknown>>('/reports/trial-balance', {\r\n      params: { date },\r\n    })\r\n    return response.data\r\n  },\r\n\r\n  getAgedReceivables: async (date: string) => {\r\n    const response = await api.get<ApiResponse<unknown>>('/reports/aged-receivables', {\r\n      params: { date },\r\n    })\r\n    return response.data\r\n  },\r\n\r\n  getAgedPayables: async (date: string) => {\r\n    const response = await api.get<ApiResponse<unknown>>('/reports/aged-payables', {\r\n      params: { date },\r\n    })\r\n    return response.data\r\n  },\r\n}\r\n\r\n// Tax service\r\nexport const taxService = {\r\n  calculateSST: async (amount: number) => {\r\n    const response = await api.post<ApiResponse<{ taxAmount: number }>>('/tax/calculate-sst', { amount })\r\n    return response.data\r\n  },\r\n\r\n  getTaxRates: async () => {\r\n    const response = await api.get<ApiResponse<unknown>>('/tax/rates')\r\n    return response.data\r\n  },\r\n\r\n  updateTaxSettings: async (settings: unknown) => {\r\n    const response = await api.put<ApiResponse<unknown>>('/tax/settings', settings)\r\n    return response.data\r\n  },\r\n}\r\n\r\n// Settings service\r\nexport const settingsService = {\r\n  // Company settings\r\n  getCompanySettings: async () => {\r\n    const response = await api.get<ApiResponse<unknown>>('/settings/company')\r\n    return response.data\r\n  },\r\n\r\n  updateCompanySettings: async (settings: unknown) => {\r\n    const response = await api.put<ApiResponse<unknown>>('/settings/company', settings)\r\n    return response.data\r\n  },\r\n\r\n  // Tax settings\r\n  getTaxSettings: async () => {\r\n    const response = await api.get<ApiResponse<unknown>>('/settings/tax')\r\n    return response.data\r\n  },\r\n\r\n  updateTaxSettings: async (settings: unknown) => {\r\n    const response = await api.put<ApiResponse<unknown>>('/settings/tax', settings)\r\n    return response.data\r\n  },\r\n\r\n  // System settings\r\n  getSystemSettings: async () => {\r\n    const response = await api.get<ApiResponse<unknown>>('/settings/system')\r\n    return response.data\r\n  },\r\n\r\n  updateSystemSettings: async (settings: unknown) => {\r\n    const response = await api.put<ApiResponse<unknown>>('/settings/system', settings)\r\n    return response.data\r\n  },\r\n\r\n  // User management\r\n  getUsers: async () => {\r\n    const response = await api.get<ApiResponse<unknown>>('/settings/users')\r\n    return response.data\r\n  },\r\n\r\n  createUser: async (userData: unknown) => {\r\n    const response = await api.post<ApiResponse<unknown>>('/settings/users', userData)\r\n    return response.data\r\n  },\r\n\r\n  updateUser: async (id: string, userData: unknown) => {\r\n    const response = await api.put<ApiResponse<unknown>>(`/settings/users/${id}`, userData)\r\n    return response.data\r\n  },\r\n\r\n  deleteUser: async (id: string) => {\r\n    const response = await api.delete<ApiResponse<unknown>>(`/settings/users/${id}`)\r\n    return response.data\r\n  },\r\n}\r\n\r\n// Dashboard service\r\nexport const dashboardService = {\r\n  getStats: async (startDate?: string, endDate?: string) => {\r\n    const response = await api.get<ApiResponse<unknown>>('/dashboard/stats', {\r\n      params: { startDate, endDate },\r\n    })\r\n    return response.data\r\n  },\r\n\r\n  getChartData: async (type: string, startDate?: string, endDate?: string) => {\r\n    const response = await api.get<ApiResponse<unknown>>(`/dashboard/charts/${type}`, {\r\n      params: { startDate, endDate },\r\n    })\r\n    return response.data\r\n  },\r\n}\r\n\r\nexport default api","import { create } from 'zustand'\r\nimport { persist } from 'zustand/middleware'\r\nimport { authService } from '../services/api'\r\nimport type { User } from '../types'\r\n\r\ninterface AuthState {\r\n  user: User | null\r\n  token: string | null\r\n  isAuthenticated: boolean\r\n  isLoading: boolean\r\n  login: (email: string, password: string) => Promise<void>\r\n  register: (userData: { name: string; email: string; password: string; companyName: string }) => Promise<void>\r\n  logout: () => void\r\n  checkAuth: () => Promise<void>\r\n  setUser: (user: User) => void\r\n}\r\n\r\nexport const useAuthStore = create<AuthState>()(\r\n  persist(\r\n    (set, get) => ({\r\n      user: null,\r\n      token: null,\r\n      isAuthenticated: false,\r\n      isLoading: false,\r\n\r\n      login: async (email: string, password: string) => {\r\n        set({ isLoading: true })\r\n        try {\r\n          const response = await authService.login(email, password)\r\n          if (response.success && response.data) {\r\n            const { token, user } = response.data as { token: string; user: User }\r\n            localStorage.setItem('authToken', token)\r\n            set({\r\n              user,\r\n              token,\r\n              isAuthenticated: true,\r\n              isLoading: false,\r\n            })\r\n          } else {\r\n            throw new Error(response.message || 'Login failed')\r\n          }\r\n        } catch (error) {\r\n          set({ isLoading: false })\r\n          console.error('Login error:', error)\r\n          throw error\r\n        }\r\n      },\r\n\r\n      register: async (userData) => {\r\n        set({ isLoading: true })\r\n        try {\r\n          const response = await authService.register(userData)\r\n          if (response.success && response.data) {\r\n            const { token, user } = response.data as { token: string; user: User }\r\n            localStorage.setItem('authToken', token)\r\n            set({\r\n              user,\r\n              token,\r\n              isAuthenticated: true,\r\n              isLoading: false,\r\n            })\r\n          } else {\r\n            throw new Error(response.message || 'Registration failed')\r\n          }\r\n        } catch (error) {\r\n          set({ isLoading: false })\r\n          console.error('Registration error:', error)\r\n          throw error\r\n        }\r\n      },\r\n\r\n      logout: () => {\r\n        localStorage.removeItem('authToken')\r\n        set({\r\n          user: null,\r\n          token: null,\r\n          isAuthenticated: false,\r\n          isLoading: false,\r\n        })\r\n      },\r\n\r\n      checkAuth: async () => {\r\n        const token = localStorage.getItem('authToken')\r\n        const userString = localStorage.getItem('user')\r\n        \r\n        if (!token || !userString) {\r\n          set({ isAuthenticated: false, isLoading: false })\r\n          return\r\n        }\r\n\r\n        set({ isLoading: true })\r\n        try {\r\n          // Use mock data from localStorage instead of API call\r\n          const user = JSON.parse(userString) as User\r\n          set({\r\n            user,\r\n            token,\r\n            isAuthenticated: true,\r\n            isLoading: false,\r\n          })\r\n        } catch (error) {\r\n          console.error('Auth check error:', error)\r\n          // Clear invalid data and set loading to false\r\n          localStorage.removeItem('authToken')\r\n          localStorage.removeItem('user')\r\n          set({ \r\n            user: null, \r\n            token: null, \r\n            isAuthenticated: false, \r\n            isLoading: false \r\n          })\r\n        }\r\n      },\r\n\r\n      setUser: (user: User) => {\r\n        set({ \r\n          user, \r\n          isAuthenticated: true,\r\n          token: localStorage.getItem('authToken') || null\r\n        })\r\n      },\r\n    }),\r\n    {\r\n      name: 'auth-storage',\r\n      partialize: (state) => ({\r\n        user: state.user,\r\n        token: state.token,\r\n        isAuthenticated: state.isAuthenticated,\r\n      }),\r\n    }\r\n  )\r\n)","import { createContext, useEffect, useState, type ReactNode } from 'react'\r\nimport { io, Socket } from 'socket.io-client'\r\nimport { useAuthStore } from '../stores/authStore'\r\nimport toast from 'react-hot-toast'\r\n\r\nexport interface Notification {\r\n  id: string\r\n  type:\r\n    | 'invoice_payment'\r\n    | 'einvoice_approved'\r\n    | 'sst_update'\r\n    | 'system_alert'\r\n    | 'payment_received'\r\n    | 'document_uploaded'\r\n    | 'receipt_uploaded'\r\n    | 'receipt_ocr_processed'\r\n    | 'receipt_classified'\r\n    | 'receipt_ready_review'\r\n    | 'receipt_approved'\r\n  title: string\r\n  message: string\r\n  data?: unknown\r\n  timestamp: Date\r\n  priority: 'low' | 'medium' | 'high' | 'urgent'\r\n  companyId: string\r\n  userId?: string\r\n  read?: boolean\r\n}\r\n\r\ninterface NotificationContextType {\r\n  socket: Socket | null\r\n  notifications: Notification[]\r\n  unreadCount: number\r\n  isConnected: boolean\r\n  markAsRead: (id: string) => void\r\n  markAllAsRead: () => void\r\n  sendTestNotification: () => void\r\n}\r\n\r\nconst NotificationContext = createContext<NotificationContextType | undefined>(undefined)\r\n\r\nexport { NotificationContext }\r\n\r\ninterface NotificationProviderProps {\r\n  children: ReactNode\r\n}\r\n\r\nexport function NotificationProvider({ children }: NotificationProviderProps) {\r\n  const [socket, setSocket] = useState<Socket | null>(null)\r\n  const [notifications, setNotifications] = useState<Notification[]>([])\r\n  const [isConnected, setIsConnected] = useState(false)\r\n  const { token, user } = useAuthStore()\r\n\r\n  const unreadCount = notifications.filter(n => !n.read).length\r\n\r\n  // Initialize socket connection\r\n  useEffect(() => {\r\n    // Do not initialize socket in test mode or when notifications are disabled via env\r\n    const disableNotifications = (import.meta.env.VITE_DISABLE_NOTIFICATIONS || 'false') === 'true' || import.meta.env.MODE === 'test' || (typeof process !== 'undefined' && process.env.NODE_ENV === 'test');\r\n    if (disableNotifications) {\r\n      console.log('🔕 Notifications disabled by environment, skipping socket initialization')\r\n      return\r\n    }\r\n\r\n    if (token && user) {\r\n      console.log('🔌 Connecting to notification service...')\r\n      \r\n      // Try to connect to the notification server\r\n      const serverUrl = import.meta.env.VITE_API_URL || 'http://localhost:3001'\r\n      console.log('🌐 Connecting to:', serverUrl)\r\n      \r\n      const newSocket = io(serverUrl, {\r\n        auth: {\r\n          token: token,\r\n          userId: user.id,\r\n          userEmail: user.email\r\n        },\r\n        // Prefer websocket first to avoid CORS/polling transport XHR issues in some dev setups\r\n        transports: ['websocket', 'polling'],\r\n        // Ensure cookies/credentials are sent if server requires them for CORS\r\n        withCredentials: true,\r\n        timeout: 20000,\r\n        retries: 3,\r\n        autoConnect: true,\r\n        forceNew: false\r\n      })\r\n\r\n      newSocket.on('connect', () => {\r\n        console.log('✅ Connected to notification service')\r\n        setIsConnected(true)\r\n        toast.success('Real-time notifications connected')\r\n        \r\n        // Send test notification to verify connection\r\n        setTimeout(() => {\r\n          newSocket.emit('test_notification')\r\n        }, 1000)\r\n      })\r\n\r\n      newSocket.on('disconnect', (reason) => {\r\n        console.log('❌ Disconnected from notification service:', reason)\r\n        setIsConnected(false)\r\n        \r\n        // Only show error for unexpected disconnects\r\n        if (reason !== 'io client disconnect') {\r\n          toast.error('Real-time notifications disconnected')\r\n        }\r\n        \r\n        // Auto-reconnect if server disconnected\r\n        if (reason === 'io server disconnect') {\r\n          setTimeout(() => {\r\n            console.log('🔄 Attempting to reconnect...')\r\n            newSocket.connect()\r\n          }, 2000)\r\n        }\r\n      })\r\n\r\n      newSocket.on('connect_error', (error) => {\r\n        // Surface error details for easier debugging (CORS, auth, network)\r\n        console.error('🔴 Connection error (socket.io):', error, '\\n', {\r\n          message: (error as any)?.message,\r\n          stack: (error as any)?.stack,\r\n          transportError: (error as any)?.transport\r\n        })\r\n        setIsConnected(false)\r\n\r\n        // If websocket transport failed due to environment/CORS, fall back to polling\r\n        const msg = (error && error.message) ? String(error.message).toLowerCase() : ''\r\n        if (msg.includes('websocket') || msg.includes('transport') || msg.includes('xhr') || msg.includes('poll')) {\r\n          console.log('🔄 WebSocket/polling issue detected, falling back to polling transport and retrying...')\r\n          try {\r\n            newSocket.io.opts.transports = ['polling']\r\n            setTimeout(() => {\r\n              newSocket.connect()\r\n            }, 1000)\r\n          } catch (e) {\r\n            console.error('Failed to switch transport:', e)\r\n            toast.error(`Failed to connect to notification service: ${(error as any)?.message || (e as any)?.message}`)\r\n          }\r\n        } else {\r\n          toast.error(`Failed to connect to notification service: ${error?.message || 'Unknown error'}`)\r\n        }\r\n      })\r\n\r\n      newSocket.on('reconnect', (attemptNumber) => {\r\n        console.log(`🔄 Reconnected after ${attemptNumber} attempts`)\r\n        setIsConnected(true)\r\n        toast.success('Notifications reconnected')\r\n      })\r\n\r\n      newSocket.on('reconnect_error', (error) => {\r\n        console.error('❌ Reconnection failed:', error.message)\r\n      })\r\n\r\n      // Listen for incoming notifications\r\n      newSocket.on('notification', (notification: Notification) => {\r\n        console.log('🔔 New notification:', notification)\r\n        \r\n        setNotifications(prev => [notification, ...prev])\r\n        \r\n        // Show toast notification based on priority\r\n        const toastOptions = {\r\n          duration: notification.priority === 'urgent' ? 8000 : \r\n                   notification.priority === 'high' ? 6000 : 4000,\r\n          icon: getNotificationIcon(notification.type)\r\n        }\r\n\r\n        if (notification.priority === 'urgent') {\r\n          toast.error(`${notification.title}: ${notification.message}`, toastOptions)\r\n        } else if (notification.priority === 'high') {\r\n          toast.success(`${notification.title}: ${notification.message}`, toastOptions)\r\n        } else {\r\n          toast(`${notification.title}: ${notification.message}`, toastOptions)\r\n        }\r\n\r\n        // Play notification sound for important notifications\r\n        if (notification.priority === 'urgent' || notification.priority === 'high') {\r\n          playNotificationSound()\r\n        }\r\n      })\r\n\r\n      // Listen for system notifications\r\n      newSocket.on('system_notification', (notification: Notification) => {\r\n        console.log('🚨 System notification:', notification)\r\n        \r\n        setNotifications(prev => [notification, ...prev])\r\n        toast.error(`System Alert: ${notification.message}`, {\r\n          duration: 10000,\r\n          icon: '🚨'\r\n        })\r\n        playNotificationSound()\r\n      })\r\n\r\n      // Load initial notifications\r\n      newSocket.on('notifications_loaded', (data: { notifications: Notification[], unreadCount: number }) => {\r\n        console.log('📬 Loaded notifications:', data)\r\n        setNotifications(data.notifications || [])\r\n      })\r\n\r\n      setSocket(newSocket)\r\n\r\n      return () => {\r\n        console.log('🔌 Cleaning up socket connection')\r\n        newSocket.disconnect()\r\n      }\r\n    }\r\n  }, [token, user])\r\n\r\n  const markAsRead = (id: string) => {\r\n    setNotifications(prev => \r\n      prev.map(notification => \r\n        notification.id === id \r\n          ? { ...notification, read: true }\r\n          : notification\r\n      )\r\n    )\r\n\r\n    if (socket) {\r\n      socket.emit('mark_notification_read', id)\r\n    }\r\n  }\r\n\r\n  const markAllAsRead = () => {\r\n    setNotifications(prev => \r\n      prev.map(notification => ({ ...notification, read: true }))\r\n    )\r\n\r\n    notifications.forEach(notification => {\r\n      if (socket && !notification.read) {\r\n        socket.emit('mark_notification_read', notification.id)\r\n      }\r\n    })\r\n  }\r\n\r\n  const sendTestNotification = () => {\r\n    if (socket && isConnected) {\r\n      // Send test via socket\r\n      socket.emit('test_notification')\r\n      toast.success('Test notification sent via Socket.IO!')\r\n    } else {\r\n      // Fallback: send via API\r\n      fetch('http://localhost:3001/api/test-notification', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          userId: user?.id || '1',\r\n          message: 'Test notification from frontend!'\r\n        })\r\n      })\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        if (data.success) {\r\n          toast.success('Test notification sent via API!')\r\n        } else {\r\n          toast.error('Failed to send test notification')\r\n        }\r\n      })\r\n      .catch(err => {\r\n        console.error('Failed to send test notification:', err)\r\n        toast.error('Failed to send test notification')\r\n      })\r\n    }\r\n  }\r\n\r\n  return (\r\n    <NotificationContext.Provider value={{\r\n      socket,\r\n      notifications,\r\n      unreadCount,\r\n      isConnected,\r\n      markAsRead,\r\n      markAllAsRead,\r\n      sendTestNotification\r\n    }}>\r\n      {children}\r\n    </NotificationContext.Provider>\r\n  )\r\n}\r\n\r\nfunction getNotificationIcon(type: Notification['type']): string {\r\n  switch (type) {\r\n    case 'invoice_payment':\r\n      return '💰'\r\n    case 'einvoice_approved':\r\n      return '✅'\r\n    case 'sst_update':\r\n      return '📋'\r\n    case 'system_alert':\r\n      return '🚨'\r\n    case 'payment_received':\r\n      return '💳'\r\n    case 'document_uploaded':\r\n      return '📄'\r\n    case 'receipt_uploaded':\r\n      return '🧾'\r\n    case 'receipt_ocr_processed':\r\n      return '🔍'\r\n    case 'receipt_classified':\r\n      return '🤖'\r\n    case 'receipt_ready_review':\r\n      return '📝'\r\n    case 'receipt_approved':\r\n      return '✅'\r\n    default:\r\n      return '🔔'\r\n  }\r\n}\r\n\r\nfunction playNotificationSound() {\r\n  try {\r\n    // Create audio context for notification sound\r\n    const audioContext = new (window.AudioContext || (window as unknown as { webkitAudioContext: typeof AudioContext }).webkitAudioContext)()\r\n    const oscillator = audioContext.createOscillator()\r\n    const gainNode = audioContext.createGain()\r\n\r\n    oscillator.connect(gainNode)\r\n    gainNode.connect(audioContext.destination)\r\n\r\n    oscillator.frequency.setValueAtTime(800, audioContext.currentTime)\r\n    oscillator.frequency.setValueAtTime(600, audioContext.currentTime + 0.1)\r\n    \r\n    gainNode.gain.setValueAtTime(0.3, audioContext.currentTime)\r\n    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3)\r\n\r\n    oscillator.start(audioContext.currentTime)\r\n    oscillator.stop(audioContext.currentTime + 0.3)\r\n  } catch (error) {\r\n    console.log('Could not play notification sound:', error)\r\n  }\r\n}\r\n\r\nexport default NotificationProvider","import { useContext } from 'react'\r\nimport { NotificationContext } from './useNotifications'\r\n\r\nexport function useNotifications() {\r\n  const context = useContext(NotificationContext)\r\n  if (context === undefined) {\r\n    // In test environments, provide a no-op fallback so components can be\r\n    // rendered in isolation without requiring the NotificationProvider.\r\n    if (process.env.NODE_ENV === 'test') {\r\n      return {\r\n        socket: null,\r\n        notifications: [],\r\n        unreadCount: 0,\r\n        isConnected: false,\r\n        markAsRead: () => {},\r\n        markAllAsRead: () => {},\r\n        sendTestNotification: () => {},\r\n      }\r\n    }\r\n    throw new Error('useNotifications must be used within a NotificationProvider')\r\n  }\r\n  return context\r\n}","import { useState } from 'react'\r\nimport { Bell, X, CheckCircle, AlertCircle, Info, Zap, Wifi, WifiOff } from 'lucide-react'\r\nimport { useNotifications } from '../hooks/useNotificationHook'\r\nimport { format } from 'date-fns'\r\n\r\nexport default function NotificationCenter() {\r\n  const { notifications, unreadCount, markAsRead, markAllAsRead, isConnected, sendTestNotification } = useNotifications()\r\n  const [isOpen, setIsOpen] = useState(false)\r\n  const [filter, setFilter] = useState<'all' | 'unread'>('all')\r\n\r\n  const filteredNotifications = filter === 'unread' \r\n    ? notifications.filter(n => !n.read)\r\n    : notifications\r\n\r\n  const getPriorityColor = (priority: string) => {\r\n    switch (priority) {\r\n      case 'urgent': return 'bg-red-500/20 border-red-500/30 text-red-400'\r\n      case 'high': return 'bg-orange-500/20 border-orange-500/30 text-orange-400'\r\n      case 'medium': return 'bg-blue-500/20 border-blue-500/30 text-blue-400'\r\n      case 'low': return 'bg-futuristic-gray-500/20 border-futuristic-gray-500/30 text-futuristic-gray-400'\r\n      default: return 'bg-futuristic-gray-500/20 border-futuristic-gray-500/30 text-futuristic-gray-400'\r\n    }\r\n  }\r\n\r\n  const getPriorityIcon = (priority: string) => {\r\n    switch (priority) {\r\n      case 'urgent': return <AlertCircle className=\"h-4 w-4 text-red-400\" />\r\n      case 'high': return <AlertCircle className=\"h-4 w-4 text-orange-400\" />\r\n      case 'medium': return <Info className=\"h-4 w-4 text-blue-400\" />\r\n      case 'low': return <CheckCircle className=\"h-4 w-4 text-futuristic-gray-400\" />\r\n      default: return <Info className=\"h-4 w-4 text-futuristic-gray-400\" />\r\n    }\r\n  }\r\n\r\n  const getTypeIcon = (type: string) => {\r\n    switch (type) {\r\n      case 'invoice_payment': return '💰'\r\n      case 'einvoice_approved': return '✅'\r\n      case 'sst_update': return '📋'\r\n      case 'system_alert': return '🚨'\r\n      case 'payment_received': return '💳'\r\n      case 'document_uploaded': return '📄'\r\n      default: return '🔔'\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"relative\">\r\n      {/* Futuristic Notification Bell Button */}\r\n      <button\r\n        onClick={() => setIsOpen(!isOpen)}\r\n        className=\"relative group p-3 rounded-xl bg-gradient-to-br from-futuristic-gray-800/50 to-futuristic-gray-700/50 \r\n                   border border-futuristic-gray-600/50 hover:border-futuristic-neon-blue/50 \r\n                   transition-all duration-300 hover:scale-110 hover:shadow-neon-blue\"\r\n      >\r\n        <Bell className={`h-5 w-5 transition-colors duration-300 ${\r\n          isConnected ? 'text-futuristic-neon-blue group-hover:text-futuristic-neon-cyan' : 'text-futuristic-gray-500'\r\n        }`} />\r\n        \r\n        {/* Unread Count Badge */}\r\n        {unreadCount > 0 && (\r\n          <span className=\"absolute -top-2 -right-2 bg-gradient-to-r from-red-500 to-red-600 text-white text-xs \r\n                          font-bold rounded-full h-6 w-6 flex items-center justify-center animate-pulse \r\n                          shadow-neon border border-red-400/30\">\r\n            {unreadCount > 99 ? '99+' : unreadCount}\r\n          </span>\r\n        )}\r\n\r\n        {/* Connection Status Indicator */}\r\n        <div className={`absolute -bottom-1 -right-1 w-3 h-3 rounded-full transition-all duration-300 ${\r\n          isConnected \r\n            ? 'bg-futuristic-neon-green shadow-neon animate-pulse' \r\n            : 'bg-red-500 animate-pulse'\r\n        }`} />\r\n      </button>\r\n\r\n      {/* Futuristic Notification Panel */}\r\n      {isOpen && (\r\n        <>\r\n          {/* Backdrop */}\r\n          <div \r\n            className=\"fixed inset-0 z-40 bg-black/30 backdrop-blur-sm lg:hidden\" \r\n            onClick={() => setIsOpen(false)}\r\n          />\r\n          \r\n          {/* Panel */}\r\n          <div className=\"absolute right-0 mt-2 w-96 max-w-[calc(100vw-2rem)] z-50 \r\n                         bg-gradient-to-br from-futuristic-gray-900/95 to-futuristic-dark/95 \r\n                         backdrop-blur-xl border border-futuristic-neon-blue/20 rounded-2xl \r\n                         shadow-cyber animate-scale-in\">\r\n            \r\n            {/* Header */}\r\n            <div className=\"relative overflow-hidden p-6 border-b border-futuristic-gray-700/50\">\r\n              {/* Background Pattern */}\r\n              <div className=\"absolute inset-0 opacity-20\">\r\n                <div className=\"absolute top-0 left-0 w-full h-full bg-gradient-to-r from-transparent via-futuristic-neon-blue/10 to-transparent animate-data-flow\"></div>\r\n              </div>\r\n              \r\n              <div className=\"relative flex items-center justify-between\">\r\n                <div className=\"flex items-center space-x-3\">\r\n                  <div className=\"w-10 h-10 rounded-xl bg-gradient-to-br from-futuristic-neon-blue/20 to-futuristic-neon-purple/20 \r\n                                 flex items-center justify-center border border-futuristic-neon-blue/30\">\r\n                    <Bell className=\"h-5 w-5 text-futuristic-neon-blue\" />\r\n                  </div>\r\n                  <div>\r\n                    <h3 className=\"text-lg font-bold text-white\">Pusat Notifikasi</h3>\r\n                    <p className=\"text-xs text-futuristic-gray-400\">\r\n                      {filteredNotifications.length} notifikasi\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"flex items-center space-x-2\">\r\n                  {/* Connection Status */}\r\n                  <div className={`flex items-center space-x-1 px-2 py-1 rounded-full text-xs ${\r\n                    isConnected \r\n                      ? 'bg-green-500/20 text-green-400 border border-green-500/30' \r\n                      : 'bg-red-500/20 text-red-400 border border-red-500/30'\r\n                  }`}>\r\n                    {isConnected ? <Wifi className=\"h-3 w-3\" /> : <WifiOff className=\"h-3 w-3\" />}\r\n                    <span>{isConnected ? 'Live' : 'Offline'}</span>\r\n                  </div>\r\n                  \r\n                  <button\r\n                    onClick={() => setIsOpen(false)}\r\n                    className=\"p-2 rounded-xl hover:bg-futuristic-gray-800/50 text-futuristic-gray-400 \r\n                              hover:text-white transition-colors\"\r\n                  >\r\n                    <X className=\"h-4 w-4\" />\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Filter Tabs */}\r\n            <div className=\"p-4 border-b border-futuristic-gray-700/50\">\r\n              <div className=\"flex space-x-2 bg-futuristic-gray-800/50 p-1 rounded-xl\">\r\n                <button\r\n                  onClick={() => setFilter('all')}\r\n                  className={`flex-1 px-3 py-2 rounded-lg text-sm font-medium transition-all duration-300 ${\r\n                    filter === 'all'\r\n                      ? 'bg-gradient-to-r from-futuristic-neon-blue/20 to-futuristic-neon-purple/20 text-futuristic-neon-blue border border-futuristic-neon-blue/30'\r\n                      : 'text-futuristic-gray-400 hover:text-white hover:bg-futuristic-gray-700/50'\r\n                  }`}\r\n                >\r\n                  Semua ({notifications.length})\r\n                </button>\r\n                <button\r\n                  onClick={() => setFilter('unread')}\r\n                  className={`flex-1 px-3 py-2 rounded-lg text-sm font-medium transition-all duration-300 ${\r\n                    filter === 'unread'\r\n                      ? 'bg-gradient-to-r from-futuristic-neon-blue/20 to-futuristic-neon-purple/20 text-futuristic-neon-blue border border-futuristic-neon-blue/30'\r\n                      : 'text-futuristic-gray-400 hover:text-white hover:bg-futuristic-gray-700/50'\r\n                  }`}\r\n                >\r\n                  Belum Baca ({unreadCount})\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Notifications List */}\r\n            <div className=\"max-h-96 overflow-y-auto\">\r\n              {filteredNotifications.length > 0 ? (\r\n                <div className=\"space-y-2 p-4\">\r\n                  {filteredNotifications.map((notification, index) => (\r\n                    <div\r\n                      key={notification.id}\r\n                      onClick={() => markAsRead(notification.id)}\r\n                      className={`\r\n                        group relative p-4 rounded-xl cursor-pointer transition-all duration-300\r\n                        hover:scale-[1.02] hover:shadow-glow animate-fade-in-up\r\n                        ${notification.read \r\n                          ? 'bg-futuristic-gray-800/30 border border-futuristic-gray-700/30' \r\n                          : 'bg-gradient-to-br from-futuristic-neon-blue/10 to-futuristic-neon-purple/10 border border-futuristic-neon-blue/20 shadow-glow'\r\n                        }\r\n                      `}\r\n                      style={{ animationDelay: `${index * 100}ms` }}\r\n                    >\r\n                      {/* Notification Content */}\r\n                      <div className=\"flex space-x-3\">\r\n                        {/* Icon */}\r\n                        <div className=\"flex-shrink-0\">\r\n                          <div className={`\r\n                            w-10 h-10 rounded-xl flex items-center justify-center text-lg\r\n                            ${getPriorityColor(notification.priority)} border\r\n                          `}>\r\n                            {getTypeIcon(notification.type)}\r\n                          </div>\r\n                        </div>\r\n\r\n                        {/* Content */}\r\n                        <div className=\"flex-1 min-w-0\">\r\n                          <div className=\"flex items-start justify-between\">\r\n                            <div className=\"flex-1\">\r\n                              <h4 className=\"text-white font-medium text-sm group-hover:text-futuristic-neon-blue transition-colors\">\r\n                                {notification.title}\r\n                              </h4>\r\n                              <p className=\"text-futuristic-gray-400 text-xs mt-1 line-clamp-2\">\r\n                                {notification.message}\r\n                              </p>\r\n                            </div>\r\n                            \r\n                            <div className=\"flex items-center space-x-2 ml-2\">\r\n                              {getPriorityIcon(notification.priority)}\r\n                              {!notification.read && (\r\n                                <div className=\"w-2 h-2 bg-futuristic-neon-blue rounded-full animate-pulse\" />\r\n                              )}\r\n                            </div>\r\n                          </div>\r\n\r\n                          {/* Timestamp */}\r\n                          <div className=\"flex items-center justify-between mt-3\">\r\n                            <span className=\"text-xs text-futuristic-gray-500\">\r\n                              {format(new Date(notification.timestamp), 'dd/MM/yyyy HH:mm')}\r\n                            </span>\r\n                            \r\n                            {/* Priority Badge */}\r\n                            <span className={`px-2 py-1 rounded-full text-xs font-medium ${getPriorityColor(notification.priority)}`}>\r\n                              {notification.priority}\r\n                            </span>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* Hover Effect */}\r\n                      <div className=\"absolute inset-0 bg-gradient-to-r from-transparent via-futuristic-neon-blue/5 to-transparent \r\n                                     opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-xl\" />\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              ) : (\r\n                <div className=\"p-8 text-center\">\r\n                  <div className=\"w-16 h-16 mx-auto mb-4 rounded-full bg-futuristic-gray-800/50 flex items-center justify-center\">\r\n                    <Bell className=\"h-8 w-8 text-futuristic-gray-500\" />\r\n                  </div>\r\n                  <p className=\"text-futuristic-gray-400 font-medium\">Tiada notifikasi</p>\r\n                  <p className=\"text-futuristic-gray-500 text-sm mt-1\">\r\n                    {filter === 'unread' ? 'Semua notifikasi telah dibaca' : 'Anda akan menerima notifikasi di sini'}\r\n                  </p>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Footer Actions */}\r\n            <div className=\"p-4 border-t border-futuristic-gray-700/50 bg-futuristic-gray-800/30\">\r\n              <div className=\"flex space-x-3\">\r\n                <button\r\n                  onClick={markAllAsRead}\r\n                  className=\"flex-1 btn-cyber text-sm py-2\"\r\n                  disabled={unreadCount === 0}\r\n                >\r\n                  <CheckCircle className=\"h-4 w-4 mr-2\" />\r\n                  Tandai Semua Dibaca\r\n                </button>\r\n                \r\n                <button\r\n                  onClick={sendTestNotification}\r\n                  className=\"btn-futuristic text-sm py-2 px-4\"\r\n                >\r\n                  <Zap className=\"h-4 w-4 mr-2\" />\r\n                  Test\r\n                </button>\r\n              </div>\r\n              \r\n              {/* Debug Info (Development Only) */}\r\n              <div className=\"mt-3 text-xs text-futuristic-gray-500 text-center\">\r\n                Status: {isConnected ? '🟢 Tersambung' : '🔴 Terputus'} • \r\n                Total: {notifications.length} • \r\n                Belum Baca: {unreadCount}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  )\r\n}","import type { ReactNode } from 'react'\r\nimport { Link, useLocation } from 'react-router-dom'\r\nimport { useState, useEffect } from 'react'\r\nimport { useAuthStore } from '../stores/authStore'\r\nimport NotificationCenter from './NotificationCenter'\r\n\r\ninterface LayoutProps {\r\n  children: ReactNode\r\n}\r\n\r\nexport default function Layout({ children }: LayoutProps) {\r\n  const location = useLocation()\r\n  const { user, logout } = useAuthStore()\r\n  const [mobileOpen, setMobileOpen] = useState(false)\r\n  // New: Desktop sidebar collapse state\r\n  const [collapsed, setCollapsed] = useState(false)\r\n\r\n  // Load persisted collapsed state\r\n  useEffect(() => {\r\n    try {\r\n      const stored = localStorage.getItem('hafjet_sidebar_collapsed')\r\n      if (stored === 'true') setCollapsed(true)\r\n    } catch {\r\n      // ignore read error (e.g., SSR or privacy mode)\r\n    }\r\n  }, [])\r\n\r\n  // Persist when changes\r\n  useEffect(() => {\r\n    try {\r\n      localStorage.setItem('hafjet_sidebar_collapsed', collapsed ? 'true' : 'false')\r\n    } catch {\r\n      // ignore write error\r\n    }\r\n  }, [collapsed])\r\n\r\n  const navigation = [\r\n    { name: 'Dashboard', href: '/dashboard', icon: '📊', category: 'main' },\r\n    { name: 'Analytics', href: '/analytics', icon: '🚀', category: 'advanced' },\r\n    { name: 'Automation', href: '/automation', icon: '⚡', category: 'advanced' },\r\n    { name: 'Companies', href: '/companies', icon: '🏢', category: 'main' },\r\n    { name: 'Banking', href: '/banking', icon: '🏦', category: 'main' },\r\n    { name: 'Invoices', href: '/invoices', icon: '🧾', category: 'main' },\r\n    { name: 'E-Invoice LHDN', href: '/einvoice', icon: '🇲🇾', category: 'main' },\r\n    { name: 'Transactions', href: '/transactions', icon: '💰', category: 'main' },\r\n    { name: 'Inventory', href: '/inventory', icon: '📦', category: 'main' },\r\n    { name: 'Digital Shoebox', href: '/digital-shoebox', icon: '📁', category: 'advanced' },\r\n    { name: 'Reports', href: '/reports', icon: '📈', category: 'main' },\r\n    { name: 'Data Management', href: '/data', icon: '💾', category: 'advanced' },\r\n    { name: 'Security', href: '/security', icon: '🛡️', category: 'system' },\r\n    { name: 'Performance', href: '/performance', icon: '⚡', category: 'system' },\r\n    { name: 'User Management', href: '/users', icon: '👥', category: 'system' },\r\n    { name: 'Settings', href: '/settings', icon: '⚙️', category: 'system' },\r\n  ]\r\n\r\n  const mainNavigation = navigation.filter(item => item.category === 'main')\r\n  const advancedNavigation = navigation.filter(item => item.category === 'advanced')\r\n  const systemNavigation = navigation.filter(item => item.category === 'system')\r\n\r\n  return (\r\n    <div className=\"flex h-screen bg-gradient-to-br from-futuristic-dark via-futuristic-gray-900 to-futuristic-darker overflow-hidden\">\r\n      \r\n      {/* Desktop Sidebar (now visible from md breakpoint) */}\r\n      <aside\r\n        data-testid=\"sidebar\"\r\n        data-collapsed={collapsed ? 'true' : 'false'}\r\n        className={`flex max-md:hidden ${collapsed ? 'w-20' : 'w-80'} flex-col border-r border-futuristic-neon-blue/30 shadow-[0_0_30px_rgba(0,212,255,0.25)] relative bg-[#0d1117] text-white transition-[width] duration-300 ease-in-out`}\r\n        aria-label=\"Sidebar utama\"\r\n        aria-expanded={!collapsed}\r\n      >\r\n        {/* Opaque single layer (remove gradients to prevent bleed) */}\r\n        <div className=\"absolute inset-0 bg-[#0d1117]\" />\r\n        {/* Optional subtle pattern overlay (very low opacity) */}\r\n        <div className=\"pointer-events-none absolute inset-0 opacity-[0.04]\" style={{backgroundImage:'radial-gradient(circle at 25% 25%,#1f2937 0%,transparent 60%)'}} />\r\n\r\n        <div className=\"relative flex-1 overflow-y-auto p-6 custom-scrollbar\">\r\n          {/* Logo */}\r\n          <div className={`flex items-center ${collapsed ? 'justify-center' : 'space-x-3'} mb-8`}> \r\n            <div className=\"h-10 w-10 bg-gradient-to-br from-futuristic-neon-blue to-futuristic-neon-purple rounded-full flex items-center justify-center shadow-neon-blue flex-shrink-0\">\r\n              <span className=\"text-white font-bold text-lg\">H</span>\r\n            </div>\r\n            {!collapsed && (\r\n              <div className=\"min-w-0\">\r\n                <span className=\"text-lg font-bold text-white block leading-tight truncate\">HAFJET Cloud</span>\r\n                <span className=\"text-sm text-futuristic-neon-blue block leading-tight\">Accounting System</span>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          <nav className=\"space-y-6\">\r\n            {/* Main Features */}\r\n            <div>\r\n              <h3 className=\"text-futuristic-neon-blue text-xs font-semibold uppercase tracking-wider mb-3\">Main Features</h3>\r\n              <div className=\"space-y-2\">\r\n                {mainNavigation.map((item) => {\r\n                  const isActive = location.pathname === item.href\r\n                  return (\r\n                    <Link\r\n                      key={item.name}\r\n                      to={item.href}\r\n                      aria-current={isActive ? 'page' : undefined}\r\n                      title={collapsed ? item.name : undefined}\r\n                      className={`${isActive\r\n                        ? 'bg-futuristic-gray-800 text-futuristic-neon-blue border-l-2 border-futuristic-neon-blue shadow-glow'\r\n                        : 'text-futuristic-gray-300 hover:text-white hover:bg-futuristic-gray-800'\r\n                      } group flex items-center ${collapsed ? 'justify-center px-2' : 'px-4'} py-3 text-sm font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-futuristic-neon-blue/50`}\r\n                    >\r\n                      <span className={`text-lg ${collapsed ? '' : 'mr-3'}`}>{item.icon}</span>\r\n                      {!collapsed && <span>{item.name}</span>}\r\n                    </Link>\r\n                  )\r\n                })}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Advanced Features */}\r\n            <div>\r\n              <h3 className=\"text-futuristic-neon-purple text-xs font-semibold uppercase tracking-wider mb-3\">Advanced</h3>\r\n              <div className=\"space-y-2\">\r\n                {advancedNavigation.map((item) => {\r\n                  const isActive = location.pathname === item.href\r\n                  return (\r\n                    <Link\r\n                      key={item.name}\r\n                      to={item.href}\r\n                      aria-current={isActive ? 'page' : undefined}\r\n                      title={collapsed ? item.name : undefined}\r\n                      className={`${isActive\r\n                        ? 'bg-futuristic-gray-800 text-futuristic-neon-purple border-l-2 border-futuristic-neon-purple shadow-glow'\r\n                        : 'text-futuristic-gray-300 hover:text-white hover:bg-futuristic-gray-800'\r\n                      } group flex items-center ${collapsed ? 'justify-center px-2' : 'px-4'} py-3 text-sm font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-futuristic-neon-purple/50`}\r\n                    >\r\n                      <span className={`text-lg ${collapsed ? '' : 'mr-3'}`}>{item.icon}</span>\r\n                      {!collapsed && <span>{item.name}</span>}\r\n                    </Link>\r\n                  )\r\n                })}\r\n              </div>\r\n            </div>\r\n\r\n            {/* System Features */}\r\n            <div>\r\n              <h3 className=\"text-futuristic-neon-green text-xs font-semibold uppercase tracking-wider mb-3\">System</h3>\r\n              <div className=\"space-y-2\">\r\n                {systemNavigation.map((item) => {\r\n                  const isActive = location.pathname === item.href\r\n                  return (\r\n                    <Link\r\n                      key={item.name}\r\n                      to={item.href}\r\n                      aria-current={isActive ? 'page' : undefined}\r\n                      title={collapsed ? item.name : undefined}\r\n                      className={`${isActive\r\n                        ? 'bg-gradient-to-r from-futuristic-neon-green/20 to-futuristic-neon-yellow/20 text-futuristic-neon-green border-l-2 border-futuristic-neon-green shadow-neon'\r\n                        : 'text-futuristic-gray-300 hover:text-white hover:bg-futuristic-gray-800/50'\r\n                      } group flex items-center ${collapsed ? 'justify-center px-2' : 'px-4'} py-3 text-sm font-medium rounded-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-futuristic-neon-green/50`}\r\n                    >\r\n                      <span className={`text-lg ${collapsed ? '' : 'mr-3'}`}>{item.icon}</span>\r\n                      {!collapsed && <span>{item.name}</span>}\r\n                    </Link>\r\n                  )\r\n                })}\r\n              </div>\r\n            </div>\r\n          </nav>\r\n        </div>\r\n        \r\n        {/* User Profile Section - Desktop */}\r\n        <div className={`relative p-6 border-t border-futuristic-neon-blue/20 bg-futuristic-gray-900 ${collapsed ? 'px-2' : ''}`}>\r\n          <div className={`bg-futuristic-gray-800 backdrop-blur-sm rounded-2xl ${collapsed ? 'p-3 flex flex-col items-center' : 'p-4'} border border-futuristic-neon-blue/20`}>            \r\n            <div className={`flex ${collapsed ? 'flex-col items-center space-y-2' : 'items-center space-x-3'} mb-3`}>\r\n              <div className=\"h-10 w-10 bg-gradient-to-br from-futuristic-neon-green to-futuristic-neon-blue rounded-full flex items-center justify-center text-white font-bold shadow-neon\">\r\n                {user?.name?.charAt(0) || 'U'}\r\n              </div>\r\n              {!collapsed && (\r\n                <div className=\"flex-1 min-w-0\">\r\n                  <p className=\"text-sm font-semibold text-white truncate\">\r\n                    {user?.name || 'User'}\r\n                  </p>\r\n                  <p className=\"text-xs text-futuristic-gray-400 truncate\">\r\n                    {user?.email || 'user@hafjet.com'}\r\n                  </p>\r\n                </div>\r\n              )}\r\n            </div>\r\n            <button\r\n              onClick={logout}\r\n              className={`w-full bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white ${collapsed ? 'py-2 px-2 text-xs' : 'py-2 px-4 text-sm'} rounded-xl font-medium transition-all duration-300 hover:shadow-lg hover:scale-105`}\r\n            >\r\n              {collapsed ? '🚪' : '🚪 Log Keluar'}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </aside>\r\n      \r\n      {/* (Removed duplicate old Mobile Menu Overlay block) */}\r\n\r\n      {/* Enhanced Main Content Area */}\r\n      <div className=\"flex-1 flex flex-col overflow-hidden relative\">\r\n        {/* Futuristic Header */}\r\n        <header className=\"bg-gradient-to-r from-futuristic-gray-900/70 to-futuristic-dark/70 backdrop-blur-xl shadow-cyber border-b border-futuristic-neon-blue/20 flex-shrink-0 relative overflow-hidden\">\r\n          {/* Animated Header Background */}\r\n          <div className=\"absolute inset-0\" style={{\r\n            backgroundImage: `\r\n              linear-gradient(90deg, transparent 0%, #00D4FF 50%, transparent 100%)\r\n            `,\r\n            animation: 'data-flow 3s linear infinite'\r\n          }} />\r\n          \r\n          <div className=\"relative px-4 sm:px-6 lg:px-8 py-4 lg:py-6\">\r\n            <div className=\"flex items-center justify-between\">\r\n              {/* Mobile Menu Button */}\r\n              <div className=\"flex items-center space-x-4\">\r\n                {/* Mobile Menu Toggle (mobile only) */}\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setMobileOpen(true)}\r\n                  className=\"lg:hidden inline-flex items-center justify-center p-2 rounded-lg text-futuristic-gray-300 hover:text-white hover:bg-futuristic-gray-800 focus:outline-none focus:ring-2 focus:ring-futuristic-neon-blue focus:ring-offset-2 focus:ring-offset-futuristic-dark transition-colors\"\r\n                  aria-label=\"Open navigation menu\"\r\n                >\r\n                  <svg className=\"h-6 w-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" aria-hidden=\"true\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 6h16M4 12h16M4 18h16\" />\r\n                  </svg>\r\n                </button>\r\n                {/* Desktop Collapse Toggle (md and up) */}\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setCollapsed(c => !c)}\r\n                  data-testid=\"collapse-toggle\"\r\n                  className=\"hidden md:inline-flex items-center justify-center p-2 rounded-lg text-futuristic-gray-300 hover:text-white hover:bg-futuristic-gray-800 focus:outline-none focus:ring-2 focus:ring-futuristic-neon-blue focus:ring-offset-2 focus:ring-offset-futuristic-dark transition-colors\"\r\n                  aria-label={collapsed ? 'Expand sidebar' : 'Collapse sidebar'}\r\n                  aria-pressed={collapsed}\r\n                >\r\n                  {collapsed ? (\r\n                    <svg className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path fillRule=\"evenodd\" d=\"M3 10a1 1 0 011-1h8.586l-2.293-2.293A1 1 0 1111.707 5.3l4 4a1 1 0 010 1.414l-4 4A1 1 0 0110.293 13.3L12.586 11H4a1 1 0 01-1-1z\" clipRule=\"evenodd\" /></svg>\r\n                  ) : (\r\n                    <svg className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path fillRule=\"evenodd\" d=\"M17 10a1 1 0 01-1 1H7.414l2.293 2.293A1 1 0 018.293 14.7l-4-4a1 1 0 010-1.414l4-4A1 1 0 019.707 5.3L7.414 8H16a1 1 0 011 1z\" clipRule=\"evenodd\" /></svg>\r\n                  )}\r\n                </button>\r\n      {/* Mobile Slide-in Menu */}\r\n      {mobileOpen && (\r\n        <div\r\n          className=\"lg:hidden fixed inset-0 z-50\"\r\n          role=\"dialog\"\r\n          aria-modal=\"true\"\r\n          aria-label=\"Mobile navigation menu\"\r\n        >\r\n          {/* Backdrop */}\r\n          <button\r\n            aria-label=\"Close navigation menu\"\r\n            onClick={() => setMobileOpen(false)}\r\n            className=\"absolute inset-0 w-full h-full bg-black/70 backdrop-blur-sm focus:outline-none\"\r\n          />\r\n          {/* Panel */}\r\n          <div\r\n            className=\"absolute top-0 left-0 h-full w-80 bg-[#0d1117] border-r border-futuristic-neon-blue/30 shadow-[0_0_25px_rgba(0,212,255,0.35)] animate-slide-in-left flex flex-col\"\r\n            data-testid=\"mobile-drawer\"\r\n          >\r\n            {/* Header */}\r\n            <div className=\"flex items-center justify-between px-5 py-5 border-b border-futuristic-neon-blue/20\">\r\n              <div className=\"flex items-center space-x-3\">\r\n                <div className=\"h-10 w-10 bg-gradient-to-br from-futuristic-neon-blue to-futuristic-neon-purple rounded-full flex items-center justify-center shadow-neon-blue\">\r\n                  <span className=\"text-white font-bold text-lg\">H</span>\r\n                </div>\r\n                <div>\r\n                  <p className=\"text-sm font-semibold text-white leading-tight\">HAFJET Cloud</p>\r\n                  <p className=\"text-[11px] text-futuristic-neon-blue leading-tight\">Accounting</p>\r\n                </div>\r\n              </div>\r\n              <button\r\n                onClick={() => setMobileOpen(false)}\r\n                aria-label=\"Close menu\"\r\n                className=\"p-2 rounded-md text-futuristic-gray-300 hover:text-white hover:bg-futuristic-gray-800 focus:outline-none focus:ring-2 focus:ring-futuristic-neon-blue\"\r\n              >\r\n                ✕\r\n              </button>\r\n            </div>\r\n\r\n            {/* Nav Scroll Area */}\r\n            <div className=\"flex-1 overflow-y-auto p-5 space-y-8 custom-scrollbar\">\r\n              {/* Main */}\r\n              <div>\r\n                <h3 className=\"text-futuristic-neon-blue text-[11px] font-semibold uppercase tracking-wider mb-3\">Main</h3>\r\n                <div className=\"space-y-2\">\r\n                  {mainNavigation.map(item => {\r\n                    const active = location.pathname === item.href\r\n                    return (\r\n                      <Link\r\n                        key={item.name}\r\n                        to={item.href}\r\n                        onClick={() => setMobileOpen(false)}\r\n                        className={`${active\r\n                          ? 'bg-futuristic-gray-800 text-futuristic-neon-blue border-l-2 border-futuristic-neon-blue shadow-glow'\r\n                          : 'text-futuristic-gray-300 hover:text-white hover:bg-futuristic-gray-800'\r\n                        } group flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-all duration-200`}\r\n                      >\r\n                        <span className=\"mr-3 text-lg\">{item.icon}</span>\r\n                        <span>{item.name}</span>\r\n                      </Link>\r\n                    )\r\n                  })}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Advanced */}\r\n              <div>\r\n                <h3 className=\"text-futuristic-neon-purple text-[11px] font-semibold uppercase tracking-wider mb-3\">Advanced</h3>\r\n                <div className=\"space-y-2\">\r\n                  {advancedNavigation.map(item => {\r\n                    const active = location.pathname === item.href\r\n                    return (\r\n                      <Link\r\n                        key={item.name}\r\n                        to={item.href}\r\n                        onClick={() => setMobileOpen(false)}\r\n                        className={`${active\r\n                          ? 'bg-futuristic-gray-800 text-futuristic-neon-purple border-l-2 border-futuristic-neon-purple shadow-glow'\r\n                          : 'text-futuristic-gray-300 hover:text-white hover:bg-futuristic-gray-800'\r\n                        } group flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-all duration-200`}\r\n                      >\r\n                        <span className=\"mr-3 text-lg\">{item.icon}</span>\r\n                        <span>{item.name}</span>\r\n                      </Link>\r\n                    )\r\n                  })}\r\n                </div>\r\n              </div>\r\n\r\n              {/* System */}\r\n              <div>\r\n                <h3 className=\"text-futuristic-neon-green text-[11px] font-semibold uppercase tracking-wider mb-3\">System</h3>\r\n                <div className=\"space-y-2\">\r\n                  {systemNavigation.map(item => {\r\n                    const active = location.pathname === item.href\r\n                    return (\r\n                      <Link\r\n                        key={item.name}\r\n                        to={item.href}\r\n                        onClick={() => setMobileOpen(false)}\r\n                        className={`${active\r\n                          ? 'bg-gradient-to-r from-futuristic-neon-green/20 to-futuristic-neon-yellow/20 text-futuristic-neon-green border-l-2 border-futuristic-neon-green shadow-neon'\r\n                          : 'text-futuristic-gray-300 hover:text-white hover:bg-futuristic-gray-800/50'\r\n                        } group flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-all duration-300`}\r\n                      >\r\n                        <span className=\"mr-3 text-lg\">{item.icon}</span>\r\n                        <span>{item.name}</span>\r\n                      </Link>\r\n                    )\r\n                  })}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Logout Section */}\r\n            <div className=\"border-t border-futuristic-gray-800 p-5\">\r\n              <button\r\n                onClick={() => { logout(); setMobileOpen(false) }}\r\n                className=\"w-full bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white py-2.5 px-4 rounded-xl text-sm font-medium transition-all duration-300 hover:shadow-lg hover:scale-[1.02]\"\r\n              >\r\n                🚪 Log Keluar\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n                \r\n                {/* Mobile Logo */}\r\n                <div className=\"lg:hidden flex items-center space-x-3\">\r\n                  <div className=\"h-8 w-8 bg-gradient-to-br from-futuristic-neon-blue to-futuristic-neon-purple rounded-full flex items-center justify-center shadow-neon-blue\">\r\n                    <span className=\"text-white font-bold text-sm\">H</span>\r\n                  </div>\r\n                  <div>\r\n                    <span className=\"text-sm font-bold text-white block leading-tight\">HAFJET</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Header Title */}\r\n              <div className=\"hidden lg:block\">\r\n                <h1 className=\"text-2xl xl:text-3xl font-bold bg-gradient-to-r from-futuristic-neon-blue via-futuristic-neon-purple to-futuristic-neon-green bg-clip-text text-transparent animate-hologram\">\r\n                  🇲🇾 Sistem Perakaunan Cloud Malaysia\r\n                </h1>\r\n                <p className=\"text-sm text-futuristic-gray-400 mt-1\">Futuristic Financial Management System</p>\r\n              </div>\r\n\r\n              {/* Header Actions */}\r\n              <div className=\"flex items-center space-x-2 sm:space-x-4\">\r\n                <NotificationCenter />\r\n                \r\n                {/* Status Badges */}\r\n                <div className=\"hidden sm:flex items-center space-x-2\">\r\n                  <span className=\"bg-gradient-to-r from-futuristic-neon-green/20 to-futuristic-neon-green/40 text-futuristic-neon-green px-2 sm:px-3 py-1 rounded-full text-xs font-medium shadow-neon border border-futuristic-neon-green/20 animate-glow-pulse\">\r\n                    E-Invoice Ready\r\n                  </span>\r\n                  <span className=\"bg-gradient-to-r from-futuristic-neon-blue/20 to-futuristic-neon-purple/40 text-futuristic-neon-blue px-2 sm:px-3 py-1 rounded-full text-xs font-medium border border-futuristic-neon-blue/20\">\r\n                    SST Compliant\r\n                  </span>\r\n                </div>\r\n\r\n                {/* User Avatar (Mobile) */}\r\n                <div className=\"lg:hidden\">\r\n                  <div className=\"h-8 w-8 bg-gradient-to-br from-futuristic-neon-green to-futuristic-neon-blue rounded-full flex items-center justify-center text-white font-bold text-sm shadow-neon\">\r\n                    {user?.name?.charAt(0) || 'U'}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Mobile Header Title */}\r\n            <div className=\"lg:hidden mt-4\">\r\n              <h1 className=\"text-lg font-bold bg-gradient-to-r from-futuristic-neon-blue via-futuristic-neon-purple to-futuristic-neon-green bg-clip-text text-transparent\">\r\n                🇲🇾 Cloud Accounting MY\r\n              </h1>\r\n            </div>\r\n          </div>\r\n        </header>\r\n\r\n        {/* Main Content with Futuristic Styling */}\r\n        <main className=\"flex-1 overflow-y-auto bg-gradient-to-br from-futuristic-dark via-futuristic-gray-900 to-futuristic-darker relative\">\r\n          {/* Background Pattern */}\r\n          <div className=\"absolute inset-0 opacity-5\">\r\n            <div className=\"absolute inset-0\" style={{\r\n              backgroundImage: `\r\n                radial-gradient(circle at 20% 50%, #00D4FF 0%, transparent 70%),\r\n                radial-gradient(circle at 80% 20%, #B537F2 0%, transparent 70%),\r\n                radial-gradient(circle at 40% 80%, #00FF88 0%, transparent 70%)\r\n              `\r\n            }} />\r\n          </div>\r\n          \r\n          {/* Content */}\r\n          <div className=\"relative p-4 sm:p-6 lg:p-8\">\r\n            <div className=\"animate-fade-in-up\">\r\n              {children}\r\n            </div>\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  )\r\n}","import { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom'\r\nimport { Toaster } from 'react-hot-toast'\r\nimport { useEffect, useState, Suspense } from 'react'\r\nimport { createLazyComponent } from './utils/performance'\r\nimport Layout from './components/Layout'\r\nimport { useAuthStore } from './stores/authStore'\r\nimport { NotificationProvider } from './hooks/useNotifications'\r\n\r\n// Lazy load all pages for better performance\r\nconst Dashboard = createLazyComponent(() => import('./pages/Dashboard'))\r\nconst Login = createLazyComponent(() => import('./pages/Login'))\r\nconst Register = createLazyComponent(() => import('./pages/Register'))\r\nconst Invoices = createLazyComponent(() => import('./pages/Invoices'))\r\nconst EInvoice = createLazyComponent(() => import('./pages/EInvoice'))\r\nconst Transactions = createLazyComponent(() => import('./pages/Transactions'))\r\nconst Reports = createLazyComponent(() => import('./pages/Reports'))\r\nconst Settings = createLazyComponent(() => import('./pages/Settings'))\r\nconst Inventory = createLazyComponent(() => import('./pages/Inventory'))\r\nconst Banking = createLazyComponent(() => import('./pages/Banking'))\r\nconst DigitalShoebox = createLazyComponent(() => import('./pages/DigitalShoebox'))\r\nconst AdvancedAnalytics = createLazyComponent(() => import('./pages/AdvancedAnalytics'))\r\nconst WorkflowAutomation = createLazyComponent(() => import('./pages/WorkflowAutomation'))\r\nconst MultiCompanyManagement = createLazyComponent(() => import('./pages/MultiCompanyManagement'))\r\nconst UserManagement = createLazyComponent(() => import('./pages/UserManagement'))\r\nconst DataManagement = createLazyComponent(() => import('./pages/DataManagement'))\r\nconst SecurityDashboard = createLazyComponent(() => import('./pages/SecurityDashboard'))\r\nconst TwoFactorAuth = createLazyComponent(() => import('./pages/TwoFactorAuth'))\r\nconst IPAccessControl = createLazyComponent(() => import('./pages/IPAccessControl'))\r\nconst NotificationCenter = createLazyComponent(() => import('./pages/NotificationCenter'))\r\nconst PerformanceMonitoring = createLazyComponent(() => import('./pages/PerformanceMonitoring'))\r\n\r\n// Loading component for lazy loaded pages\r\nconst PageLoadingSpinner = () => (\r\n  <div className=\"flex items-center justify-center min-h-[60vh]\">\r\n    <div className=\"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600\"></div>\r\n    <span className=\"ml-3 text-lg text-gray-600\">Loading...</span>\r\n  </div>\r\n)\r\n\r\nfunction App() {\r\n  const { isAuthenticated, checkAuth, isLoading } = useAuthStore()\r\n  const [initComplete, setInitComplete] = useState(false)\r\n\r\n  useEffect(() => {\r\n    const init = async () => {\r\n      try {\r\n        await checkAuth()\r\n      } catch (error) {\r\n        console.error('Auth initialization error:', error)\r\n      } finally {\r\n        setInitComplete(true)\r\n      }\r\n    }\r\n    \r\n    init()\r\n    \r\n    // Fallback timeout to prevent infinite loading\r\n    const timeout = setTimeout(() => {\r\n      setInitComplete(true)\r\n    }, 3000)\r\n    \r\n    return () => clearTimeout(timeout)\r\n  }, [checkAuth])\r\n\r\n  // Show loading during auth check\r\n  if (isLoading || !initComplete) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gradient-to-br from-blue-900 to-purple-900 flex items-center justify-center\">\r\n        <div className=\"bg-white/10 backdrop-blur-lg rounded-3xl p-8 text-center\">\r\n          <div className=\"animate-spin h-12 w-12 border-4 border-white/30 border-t-white rounded-full mx-auto mb-4\"></div>\r\n          <h2 className=\"text-xl font-bold text-white mb-2\">Loading HAFJET Cloud Accounting System...</h2>\r\n          <p className=\"text-white/80\">🇲🇾 Initializing Malaysian Cloud Accounting System</p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (!isAuthenticated) {\r\n    return (\r\n      <Router>\r\n        <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100\">\r\n          <Suspense fallback={<PageLoadingSpinner />}>\r\n            <Routes>\r\n              <Route path=\"/login\" element={<Login />} />\r\n              <Route path=\"/register\" element={<Register />} />\r\n              <Route path=\"*\" element={<Navigate to=\"/login\" replace />} />\r\n            </Routes>\r\n          </Suspense>\r\n          <Toaster position=\"top-right\" />\r\n        </div>\r\n      </Router>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <NotificationProvider>\r\n      <Router>\r\n        <Layout>\r\n          <Suspense fallback={<PageLoadingSpinner />}>\r\n            <Routes>\r\n              <Route path=\"/\" element={<Dashboard />} />\r\n              <Route path=\"/dashboard\" element={<Dashboard />} />\r\n              <Route path=\"/analytics\" element={<AdvancedAnalytics />} />\r\n              <Route path=\"/automation\" element={<WorkflowAutomation />} />\r\n              <Route path=\"/companies\" element={<MultiCompanyManagement />} />\r\n              <Route path=\"/banking\" element={<Banking />} />\r\n              <Route path=\"/invoices\" element={<Invoices />} />\r\n              <Route path=\"/invoices/new\" element={<Invoices />} />\r\n              <Route path=\"/invoices/:id\" element={<Invoices />} />\r\n              <Route path=\"/einvoice\" element={<EInvoice />} />\r\n              <Route path=\"/einvoice/manage\" element={<EInvoice />} />\r\n              <Route path=\"/einvoice/create\" element={<EInvoice />} />\r\n              <Route path=\"/einvoice/validate\" element={<EInvoice />} />\r\n              <Route path=\"/transactions\" element={<Transactions />} />\r\n              <Route path=\"/inventory\" element={<Inventory />} />\r\n              <Route path=\"/digital-shoebox\" element={<DigitalShoebox />} />\r\n              <Route path=\"/notifications\" element={<NotificationCenter />} />\r\n              <Route path=\"/users\" element={<UserManagement />} />\r\n              <Route path=\"/data\" element={<DataManagement />} />\r\n              <Route path=\"/security\" element={<SecurityDashboard />} />\r\n              <Route path=\"/security/2fa\" element={<TwoFactorAuth />} />\r\n              <Route path=\"/security/ip-control\" element={<IPAccessControl />} />\r\n              <Route path=\"/performance\" element={<PerformanceMonitoring />} />\r\n              <Route path=\"/reports\" element={<Reports />} />\r\n              <Route path=\"/reports/profit-loss\" element={<Reports />} />\r\n              <Route path=\"/reports/balance-sheet\" element={<Reports />} />\r\n              <Route path=\"/reports/cash-flow\" element={<Reports />} />\r\n              <Route path=\"/settings\" element={<Settings />} />\r\n              <Route path=\"*\" element={<Navigate to=\"/dashboard\" replace />} />\r\n            </Routes>\r\n          </Suspense>\r\n        </Layout>\r\n        <Toaster position=\"top-right\" />\r\n      </Router>\r\n    </NotificationProvider>\r\n  )\r\n}\r\n\r\nexport default App\r\n","import { StrictMode } from 'react'\r\nimport { createRoot } from 'react-dom/client'\r\nimport './index.css'\r\nimport App from './App'\r\n\r\n// Initialize Sentry for frontend error tracking if DSN provided\r\nif (import.meta.env.VITE_SENTRY_DSN) {\r\n  // Dynamic import to avoid requiring the package when not configured\r\n  import('@sentry/react').then(Sentry => {\r\n    import('@sentry/tracing').then(Tracing => {\r\n      Sentry.init({\r\n        dsn: import.meta.env.VITE_SENTRY_DSN,\r\n        environment: import.meta.env.MODE || 'development',\r\n        integrations: [new Tracing.BrowserTracing()],\r\n        tracesSampleRate: parseFloat(import.meta.env.VITE_SENTRY_TRACES_SAMPLE_RATE || '0.0')\r\n      });\r\n    });\r\n  }).catch(err => console.warn('Sentry not initialized:', err));\r\n}\r\n\r\nconst root = document.getElementById('root')\r\nif (root) {\r\n  createRoot(root).render(\r\n    <StrictMode>\r\n      <App />\r\n    </StrictMode>,\r\n  )\r\n} else {\r\n  console.error('Root element not found!')\r\n}\r\n"],"file":"assets/index-79LI_bQh.js"}
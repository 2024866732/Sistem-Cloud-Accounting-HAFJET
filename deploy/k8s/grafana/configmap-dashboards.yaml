apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-dashboards
data:
  hafjet-overview.json: |
    {
      "annotations": {"list":[]},
      "panels": [
        {
          "type": "graph",
          "title": "Notification Delivery Rate",
          "targets": [
            { "expr": "rate(notification_delivery_total[5m])", "legendFormat": "delivery rate" }
          ],
          "id": 1
        },
        {
          "type": "graph",
          "title": "Notification Delivery Latency (ms)",
          "targets": [
            { "expr": "histogram_quantile(0.95, sum(rate(notification_delivery_latency_ms_bucket[5m])) by (le))", "legendFormat": "p95" }
          ],
          "id": 2
        },
        {
          "type": "graph",
          "title": "Process CPU (user)",
          "targets": [
            { "expr": "process_cpu_user_seconds_total", "legendFormat": "cpu_user" }
          ],
          "id": 3
        },
        {
          "type": "graph",
          "title": "Process Memory RSS",
          "targets": [
            { "expr": "process_resident_memory_bytes", "legendFormat": "rss" }
          ],
          "id": 4
        }
      ],
      "title": "HAFJET Overview",
      "version": 1
    }
